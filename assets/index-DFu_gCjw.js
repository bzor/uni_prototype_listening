(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const X={PI:Math.PI,TAU:Math.PI*2,E:Math.E,PHI:(1+Math.sqrt(5))/2,abs:Math.abs,min:Math.min,max:Math.max,clamp:(r,t,e)=>Math.min(Math.max(r,t),e),saturate:r=>Math.min(Math.max(r,0),1),mix:(r,t,e)=>r+(t-r)*e,lerp:(r,t,e)=>r+(t-r)*e,smoothstep:(r,t,e)=>{const n=X.clamp((e-r)/(t-r),0,1);return n*n*(3-2*n)},smootherstep:(r,t,e)=>{const n=X.clamp((e-r)/(t-r),0,1);return n*n*n*(n*(n*6-15)+10)},sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,atan2:Math.atan2,pow:Math.pow,exp:Math.exp,log:Math.log,log2:Math.log2,sqrt:Math.sqrt,inversesqrt:r=>1/Math.sqrt(r),floor:Math.floor,ceil:Math.ceil,round:Math.round,fract:r=>r-Math.floor(r),mod:(r,t)=>r-t*Math.floor(r/t),fmod:(r,t)=>r-t*Math.floor(r/t),sign:r=>r>0?1:r<0?-1:0,step:(r,t)=>t<r?0:1,length:r=>Math.sqrt(r.x*r.x+r.y*r.y),distance:(r,t)=>Math.sqrt((t.x-r.x)**2+(t.y-r.y)**2),dot:(r,t)=>r.x*t.x+r.y*t.y,normalize:r=>{const t=Math.sqrt(r.x*r.x+r.y*r.y);return t>0?{x:r.x/t,y:r.y/t}:{x:0,y:0}},noise:r=>{const t=Math.floor(r),e=r-t,n=Math.sin(t*12.9898)*43758.5453,i=Math.sin((t+1)*12.9898)*43758.5453;return X.mix(n-Math.floor(n),i-Math.floor(i),e)},random:r=>{const t=Math.floor(r),e=r-t,n=Math.sin(t*12.9898)*43758.5453;return(n-Math.floor(n))*e},rgb2hsv:(r,t,e)=>{const n=Math.max(r,t,e),i=Math.min(r,t,e),o=n-i;let a=0;o!==0&&(n===r?a=(t-e)/o%6:n===t?a=(e-r)/o+2:a=(r-t)/o+4),a=(a*60+360)%360;const s=n===0?0:o/n;return{h:a,s,v:n}},hsv2rgb:(r,t,e)=>{const n=e*t,i=n*(1-Math.abs(r/60%2-1)),o=e-n;let a,s,l;return r<60?(a=n,s=i,l=0):r<120?(a=i,s=n,l=0):r<180?(a=0,s=n,l=i):r<240?(a=0,s=i,l=n):r<300?(a=i,s=0,l=n):(a=n,s=0,l=i),{r:(a+o)*255,g:(s+o)*255,b:(l+o)*255}},easeInQuad:r=>r*r,easeOutQuad:r=>r*(2-r),easeInOutQuad:r=>r<.5?2*r*r:-1+(4-2*r)*r,easeInCubic:r=>r*r*r,easeOutCubic:r=>--r*r*r+1,easeInOutCubic:r=>r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1,easeInSine:r=>1-Math.cos(r*Math.PI/2),easeOutSine:r=>Math.sin(r*Math.PI/2),easeInOutSine:r=>-(Math.cos(Math.PI*r)-1)/2,sawtooth:r=>2*(r-Math.floor(r+.5)),triangle:r=>2*Math.abs(2*(r-Math.floor(r+.5)))-1,square:r=>Math.sin(r)>0?1:-1,fbm:(r,t=4,e=2,n=.5)=>{let i=0,o=1,a=1;for(let s=0;s<t;s++)i+=o*X.noise(r*a),o*=n,a*=e;return i},domainWarp:(r,t=1)=>{const e={x:X.fbm({x:r.x,y:r.y}),y:X.fbm({x:r.x+5.2,y:r.y+1.3})};return{x:r.x+e.x*t,y:r.y+e.y*t}},cartesianToPolar:(r,t)=>({r:Math.sqrt(r*r+t*t),theta:Math.atan2(t,r)}),polarToCartesian:(r,t)=>({x:r*Math.cos(t),y:r*Math.sin(t)}),fibonacciSpiral:(r,t=1)=>{const e=(1+Math.sqrt(5))/2,n=r*2*Math.PI/(e*e),i=t*Math.sqrt(r);return{x:Math.cos(n)*i,y:Math.sin(n)*i}},goldenSpiral:(r,t=1)=>{const n=r*2.3999632297286535,i=t*Math.sqrt(r);return{x:Math.cos(n)*i,y:Math.sin(n)*i}},map:(r,t,e,n,i)=>n+(i-n)*(r-t)/(e-t),remap:(r,t,e,n,i)=>n+(i-n)*(r-t)/(e-t),mixColors:(r,t,e)=>({r:X.mix(r.r,t.r,e),g:X.mix(r.g,t.g,e),b:X.mix(r.b,t.b,e)}),hexToRgb:r=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},rgbToHex:(r,t,e)=>"#"+((1<<24)+(Math.round(r)<<16)+(Math.round(t)<<8)+Math.round(e)).toString(16).slice(1),hexToRgba:(r,t=1)=>{const e=X.hexToRgb(r);return`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`},parseRgba:r=>{if(!r||typeof r!="string")return{r:0,g:0,b:0,a:1};const t=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return t?{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10),a:t[4]?parseFloat(t[4]):1}:{r:1,g:0,b:1,a:1}},mixRgba:(r,t,e)=>{if(!r||!t)return r||t||"rgba(0, 0, 0, 1)";const n=X.parseRgba(r),i=X.parseRgba(t),o=Math.round(X.mix(n.r,i.r,e)),a=Math.round(X.mix(n.g,i.g,e)),s=Math.round(X.mix(n.b,i.b,e)),l=X.mix(n.a,i.a,e);return`rgba(${o}, ${a}, ${s}, ${l})`}},{clamp:yo,mix:De,sin:Co,fibonacciSpiral:To,remap:vo,hexToRgb:Eo,hexToRgba:tt,mixRgba:Ne}=X;function At(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function er(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ct={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},oe={duration:.5,overwrite:!1,delay:0},An,Q,k,_t=1e8,L=1/_t,un=Math.PI*2,xo=un/4,Mo=0,nr=Math.sqrt,Io=Math.cos,Ao=Math.sin,W=function(t){return typeof t=="string"},U=function(t){return typeof t=="function"},wt=function(t){return typeof t=="number"},Sn=function(t){return typeof t>"u"},Mt=function(t){return typeof t=="object"},it=function(t){return t!==!1},wn=function(){return typeof window<"u"},Fe=function(t){return U(t)||W(t)},ir=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},j=Array.isArray,fn=/(?:-?\.?\d|\.)+/gi,rr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,jt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,or=/[+-]=-?[.\d]+/,sr=/[^,'"\[\]\s]+/gi,So=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,b,vt,cn,Pn,dt={},Ge={},ar,lr=function(t){return(Ge=se(t,dt))&&at},Rn=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Te=function(t,e){return!e&&console.warn(t)},ur=function(t,e){return t&&(dt[t]=e)&&Ge&&(Ge[t]=e)||dt},ve=function(){return 0},wo={suppressEvents:!0,isStart:!0,kill:!1},Le={suppressEvents:!0,kill:!1},Po={suppressEvents:!0},Dn={},Ft=[],dn={},fr,lt={},en={},Wn=30,ke=[],Nn="",Fn=function(t){var e=t[0],n,i;if(Mt(e)||U(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(i=ke.length;i--&&!ke[i].targetTest(e););n=ke[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Or(t[i],n)))||t.splice(i,1);return t},Yt=function(t){return t._gsap||Fn(gt(t))[0]._gsap},cr=function(t,e,n){return(n=t[e])&&U(n)?t[e]():Sn(n)&&t.getAttribute&&t.getAttribute(e)||n},rt=function(t,e){return(t=t.split(",")).forEach(e)||t},G=function(t){return Math.round(t*1e5)/1e5||0},H=function(t){return Math.round(t*1e7)/1e7||0},ee=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+i:n==="-"?t-i:n==="*"?t*i:t/i},Ro=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Be=function(){var t=Ft.length,e=Ft.slice(0),n,i;for(dn={},Ft.length=0,n=0;n<t;n++)i=e[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},On=function(t){return!!(t._initted||t._startAt||t.add)},dr=function(t,e,n,i){Ft.length&&!Q&&Be(),t.render(e,n,!!(Q&&e<0&&On(t))),Ft.length&&!Q&&Be()},hr=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(sr).length<2?e:W(t)?t.trim():t},pr=function(t){return t},ht=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Do=function(t){return function(e,n){for(var i in n)i in e||i==="duration"&&t||i==="ease"||(e[i]=n[i])}},se=function(t,e){for(var n in e)t[n]=e[n];return t},Jn=function r(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=Mt(e[n])?r(t[n]||(t[n]={}),e[n]):e[n]);return t},ze=function(t,e){var n={},i;for(i in t)i in e||(n[i]=t[i]);return n},_e=function(t){var e=t.parent||b,n=t.keyframes?Do(j(t.keyframes)):ht;if(it(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},No=function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0},mr=function(t,e,n,i,o){var a=t[i],s;if(o)for(s=e[o];a&&a[o]>s;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},Qe=function(t,e,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var o=e._prev,a=e._next;o?o._next=a:t[n]===e&&(t[n]=a),a?a._prev=o:t[i]===e&&(t[i]=o),e._next=e._prev=e.parent=null},Lt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},$t=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Fo=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},hn=function(t,e,n,i){return t._startAt&&(Q?t._startAt.revert(Le):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},Oo=function r(t){return!t||t._ts&&r(t.parent)},Xn=function(t){return t._repeat?ae(t._tTime,t=t.duration()+t._rDelay)*t:0},ae=function(t,e){var n=Math.floor(t=H(t/e));return t&&n===t?n-1:n},He=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ze=function(t){return t._end=H(t._start+(t._tDur/Math.abs(t._ts||t._rts||L)||0))},je=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=H(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ze(t),n._dirty||$t(n,t)),t},_r=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=He(t.rawTime(),e),(!e._dur||we(0,e.totalDuration(),n)-e._tTime>L)&&e.render(n,!0)),$t(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-L}},Et=function(t,e,n,i){return e.parent&&Lt(e),e._start=H((wt(n)?n:n||t!==b?mt(t,n,e):t._time)+e._delay),e._end=H(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),mr(t,e,"_first","_last",t._sort?"_start":0),pn(e)||(t._recent=e),i||_r(t,e),t._ts<0&&je(t,t._tTime),t},gr=function(t,e){return(dt.ScrollTrigger||Rn("scrollTrigger",e))&&dt.ScrollTrigger.create(e,t)},yr=function(t,e,n,i,o){if(kn(t,e,o),!t._initted)return 1;if(!n&&t._pt&&!Q&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&fr!==ut.frame)return Ft.push(t),t._lazy=[o,i],1},Lo=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},pn=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},ko=function(t,e,n,i){var o=t.ratio,a=e<0||!e&&(!t._start&&Lo(t)&&!(!t._initted&&pn(t))||(t._ts<0||t._dp._ts<0)&&!pn(t))?0:1,s=t._rDelay,l=0,d,c,h;if(s&&t._repeat&&(l=we(0,t._tDur,e),c=ae(l,s),t._yoyo&&c&1&&(a=1-a),c!==ae(t._tTime,s)&&(o=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==o||Q||i||t._zTime===L||!e&&t._zTime){if(!t._initted&&yr(t,e,i,n,l))return;for(h=t._zTime,t._zTime=e||(n?L:0),n||(n=e&&!h),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=l,d=t._pt;d;)d.r(a,d.d),d=d._next;e<0&&hn(t,e,n,!0),t._onUpdate&&!n&&ft(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&ft(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&Lt(t,1),!n&&!Q&&(ft(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},bo=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<e)return i;i=i._prev}},le=function(t,e,n,i){var o=t._repeat,a=H(e)||0,s=t._tTime/t._tDur;return s&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=o?o<0?1e10:H(a*(o+1)+t._rDelay*o):a,s>0&&!i&&je(t,t._tTime=t._tDur*s),t.parent&&Ze(t),n||$t(t.parent,t),t},Qn=function(t){return t instanceof et?$t(t):le(t,t._dur)},Vo={_start:0,endTime:ve,totalDuration:ve},mt=function r(t,e,n){var i=t.labels,o=t._recent||Vo,a=t.duration()>=_t?o.endTime(!1):t._dur,s,l,d;return W(e)&&(isNaN(e)||e in i)?(l=e.charAt(0),d=e.substr(-1)==="%",s=e.indexOf("="),l==="<"||l===">"?(s>=0&&(e=e.replace(/=/,"")),(l==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(e.substr(1))||0)*(d?(s<0?o:n).totalDuration()/100:1)):s<0?(e in i||(i[e]=a),i[e]):(l=parseFloat(e.charAt(s-1)+e.substr(s+1)),d&&n&&(l=l/100*(j(n)?n[0]:n).totalDuration()),s>1?r(t,e.substr(0,s-1),n)+l:a+l)):e==null?a:+e},ge=function(t,e,n){var i=wt(e[1]),o=(i?2:1)+(t<2?0:1),a=e[o],s,l;if(i&&(a.duration=e[1]),a.parent=n,t){for(s=a,l=n;l&&!("immediateRender"in s);)s=l.vars.defaults||{},l=it(l.vars.inherit)&&l.parent;a.immediateRender=it(s.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new z(e[0],a,e[o+1])},bt=function(t,e){return t||t===0?e(t):e},we=function(t,e,n){return n<t?t:n>e?e:n},Z=function(t,e){return!W(t)||!(e=So.exec(t))?"":e[1]},Uo=function(t,e,n){return bt(n,function(i){return we(t,e,i)})},mn=[].slice,Cr=function(t,e){return t&&Mt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Mt(t[0]))&&!t.nodeType&&t!==vt},qo=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(i){var o;return W(i)&&!e||Cr(i,1)?(o=n).push.apply(o,gt(i)):n.push(i)})||n},gt=function(t,e,n){return k&&!e&&k.selector?k.selector(t):W(t)&&!n&&(cn||!ue())?mn.call((e||Pn).querySelectorAll(t),0):j(t)?qo(t,n):Cr(t)?mn.call(t,0):t?[t]:[]},_n=function(t){return t=gt(t)[0]||Te("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return gt(e,n.querySelectorAll?n:n===t?Te("Invalid scope")||Pn.createElement("div"):t)}},Tr=function(t){return t.sort(function(){return .5-Math.random()})},vr=function(t){if(U(t))return t;var e=Mt(t)?t:{each:t},n=Kt(e.ease),i=e.from||0,o=parseFloat(e.base)||0,a={},s=i>0&&i<1,l=isNaN(i)||s,d=e.axis,c=i,h=i;return W(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!s&&l&&(c=i[0],h=i[1]),function(m,_,g){var p=(g||e).length,y=a[p],T,C,E,x,v,M,A,S,I;if(!y){if(I=e.grid==="auto"?0:(e.grid||[1,_t])[1],!I){for(A=-_t;A<(A=g[I++].getBoundingClientRect().left)&&I<p;);I<p&&I--}for(y=a[p]=[],T=l?Math.min(I,p)*c-.5:i%I,C=I===_t?0:l?p*h/I-.5:i/I|0,A=0,S=_t,M=0;M<p;M++)E=M%I-T,x=C-(M/I|0),y[M]=v=d?Math.abs(d==="y"?x:E):nr(E*E+x*x),v>A&&(A=v),v<S&&(S=v);i==="random"&&Tr(y),y.max=A-S,y.min=S,y.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(I>p?p-1:d?d==="y"?p/I:I:Math.max(I,p/I))||0)*(i==="edges"?-1:1),y.b=p<0?o-p:o,y.u=Z(e.amount||e.each)||0,n=n&&p<0?Dr(n):n}return p=(y[m]-y.min)/y.max||0,H(y.b+(n?n(p):p)*y.v)+y.u}},gn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=H(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(wt(n)?0:Z(n))}},Er=function(t,e){var n=j(t),i,o;return!n&&Mt(t)&&(i=n=t.radius||_t,t.values?(t=gt(t.values),(o=!wt(t[0]))&&(i*=i)):t=gn(t.increment)),bt(e,n?U(t)?function(a){return o=t(a),Math.abs(o-a)<=i?o:a}:function(a){for(var s=parseFloat(o?a.x:a),l=parseFloat(o?a.y:0),d=_t,c=0,h=t.length,m,_;h--;)o?(m=t[h].x-s,_=t[h].y-l,m=m*m+_*_):m=Math.abs(t[h]-s),m<d&&(d=m,c=h);return c=!i||d<=i?t[c]:a,o||c===a||wt(a)?c:c+Z(a)}:gn(t))},xr=function(t,e,n,i){return bt(j(t)?!e:n===!0?!!(n=0):!i,function(){return j(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*i)/i})},Go=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){return e.reduce(function(o,a){return a(o)},i)}},Bo=function(t,e){return function(n){return t(parseFloat(n))+(e||Z(n))}},zo=function(t,e,n){return Ir(t,e,0,1,n)},Mr=function(t,e,n){return bt(n,function(i){return t[~~e(i)]})},Ho=function r(t,e,n){var i=e-t;return j(t)?Mr(t,r(0,t.length),e):bt(n,function(o){return(i+(o-t)%i)%i+t})},Yo=function r(t,e,n){var i=e-t,o=i*2;return j(t)?Mr(t,r(0,t.length-1),e):bt(n,function(a){return a=(o+(a-t)%o)%o||0,t+(a>i?o-a:a)})},Ee=function(t){for(var e=0,n="",i,o,a,s;~(i=t.indexOf("random(",e));)a=t.indexOf(")",i),s=t.charAt(i+7)==="[",o=t.substr(i+7,a-i-7).match(s?sr:fn),n+=t.substr(e,i-e)+xr(s?o:+o[0],s?0:+o[1],+o[2]||1e-5),e=a+1;return n+t.substr(e,t.length-e)},Ir=function(t,e,n,i,o){var a=e-t,s=i-n;return bt(o,function(l){return n+((l-t)/a*s||0)})},$o=function r(t,e,n,i){var o=isNaN(t+e)?0:function(_){return(1-_)*t+_*e};if(!o){var a=W(t),s={},l,d,c,h,m;if(n===!0&&(i=1)&&(n=null),a)t={p:t},e={p:e};else if(j(t)&&!j(e)){for(c=[],h=t.length,m=h-2,d=1;d<h;d++)c.push(r(t[d-1],t[d]));h--,o=function(g){g*=h;var p=Math.min(m,~~g);return c[p](g-p)},n=e}else i||(t=se(j(t)?[]:{},t));if(!c){for(l in e)Ln.call(s,t,l,"get",e[l]);o=function(g){return Un(g,s)||(a?t.p:t)}}}return bt(n,o)},Zn=function(t,e,n){var i=t.labels,o=_t,a,s,l;for(a in i)s=i[a]-e,s<0==!!n&&s&&o>(s=Math.abs(s))&&(l=a,o=s);return l},ft=function(t,e,n){var i=t.vars,o=i[e],a=k,s=t._ctx,l,d,c;if(o)return l=i[e+"Params"],d=i.callbackScope||t,n&&Ft.length&&Be(),s&&(k=s),c=l?o.apply(d,l):o.call(d),k=a,c},pe=function(t){return Lt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Q),t.progress()<1&&ft(t,"onInterrupt"),t},te,Ar=[],Sr=function(t){if(t)if(t=!t.name&&t.default||t,wn()||t.headless){var e=t.name,n=U(t),i=e&&!n&&t.init?function(){this._props=[]}:t,o={init:ve,render:Un,add:Ln,kill:ls,modifier:as,rawVars:0},a={targetTest:0,get:0,getSetter:Vn,aliases:{},register:0};if(ue(),t!==i){if(lt[e])return;ht(i,ht(ze(t,o),a)),se(i.prototype,se(o,ze(t,a))),lt[i.prop=e]=i,t.targetTest&&(ke.push(i),Dn[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ur(e,i),t.register&&t.register(at,i,ot)}else Ar.push(t)},O=255,me={aqua:[0,O,O],lime:[0,O,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,O],navy:[0,0,128],white:[O,O,O],olive:[128,128,0],yellow:[O,O,0],orange:[O,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[O,0,0],pink:[O,192,203],cyan:[0,O,O],transparent:[O,O,O,0]},nn=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*O+.5|0},wr=function(t,e,n){var i=t?wt(t)?[t>>16,t>>8&O,t&O]:0:me.black,o,a,s,l,d,c,h,m,_,g;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),me[t])i=me[t];else if(t.charAt(0)==="#"){if(t.length<6&&(o=t.charAt(1),a=t.charAt(2),s=t.charAt(3),t="#"+o+o+a+a+s+s+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&O,i&O,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&O,t&O]}else if(t.substr(0,3)==="hsl"){if(i=g=t.match(fn),!e)l=+i[0]%360/360,d=+i[1]/100,c=+i[2]/100,a=c<=.5?c*(d+1):c+d-c*d,o=c*2-a,i.length>3&&(i[3]*=1),i[0]=nn(l+1/3,o,a),i[1]=nn(l,o,a),i[2]=nn(l-1/3,o,a);else if(~t.indexOf("="))return i=t.match(rr),n&&i.length<4&&(i[3]=1),i}else i=t.match(fn)||me.transparent;i=i.map(Number)}return e&&!g&&(o=i[0]/O,a=i[1]/O,s=i[2]/O,h=Math.max(o,a,s),m=Math.min(o,a,s),c=(h+m)/2,h===m?l=d=0:(_=h-m,d=c>.5?_/(2-h-m):_/(h+m),l=h===o?(a-s)/_+(a<s?6:0):h===a?(s-o)/_+2:(o-a)/_+4,l*=60),i[0]=~~(l+.5),i[1]=~~(d*100+.5),i[2]=~~(c*100+.5)),n&&i.length<4&&(i[3]=1),i},Pr=function(t){var e=[],n=[],i=-1;return t.split(Ot).forEach(function(o){var a=o.match(jt)||[];e.push.apply(e,a),n.push(i+=a.length+1)}),e.c=n,e},jn=function(t,e,n){var i="",o=(t+i).match(Ot),a=e?"hsla(":"rgba(",s=0,l,d,c,h;if(!o)return t;if(o=o.map(function(m){return(m=wr(m,e,1))&&a+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(c=Pr(t),l=n.c,l.join(i)!==c.c.join(i)))for(d=t.replace(Ot,"1").split(jt),h=d.length-1;s<h;s++)i+=d[s]+(~l.indexOf(s)?o.shift()||a+"0,0,0,0)":(c.length?c:o.length?o:n).shift());if(!d)for(d=t.split(Ot),h=d.length-1;s<h;s++)i+=d[s]+o[s];return i+d[h]},Ot=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in me)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),Ko=/hsl[a]?\(/,Rr=function(t){var e=t.join(" "),n;if(Ot.lastIndex=0,Ot.test(e))return n=Ko.test(e),t[1]=jn(t[1],n),t[0]=jn(t[0],n,Pr(t[1])),!0},xe,ut=function(){var r=Date.now,t=500,e=33,n=r(),i=n,o=1e3/240,a=o,s=[],l,d,c,h,m,_,g=function p(y){var T=r()-i,C=y===!0,E,x,v,M;if((T>t||T<0)&&(n+=T-e),i+=T,v=i-n,E=v-a,(E>0||C)&&(M=++h.frame,m=v-h.time*1e3,h.time=v=v/1e3,a+=E+(E>=o?4:o-E),x=1),C||(l=d(p)),x)for(_=0;_<s.length;_++)s[_](v,m,M,y)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return m/(1e3/(y||60))},wake:function(){ar&&(!cn&&wn()&&(vt=cn=window,Pn=vt.document||{},dt.gsap=at,(vt.gsapVersions||(vt.gsapVersions=[])).push(at.version),lr(Ge||vt.GreenSockGlobals||!vt.gsap&&vt||{}),Ar.forEach(Sr)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),d=c||function(y){return setTimeout(y,a-h.time*1e3+1|0)},xe=1,g(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),xe=0,d=ve},lagSmoothing:function(y,T){t=y||1/0,e=Math.min(T||33,t)},fps:function(y){o=1e3/(y||240),a=h.time*1e3+o},add:function(y,T,C){var E=T?function(x,v,M,A){y(x,v,M,A),h.remove(E)}:y;return h.remove(y),s[C?"unshift":"push"](E),ue(),E},remove:function(y,T){~(T=s.indexOf(y))&&s.splice(T,1)&&_>=T&&_--},_listeners:s},h}(),ue=function(){return!xe&&ut.wake()},P={},Wo=/^[\d.\-M][\d.\-,\s]/,Jo=/["']/g,Xo=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),i=n[0],o=1,a=n.length,s,l,d;o<a;o++)l=n[o],s=o!==a-1?l.lastIndexOf(","):l.length,d=l.substr(0,s),e[i]=isNaN(d)?d.replace(Jo,"").trim():+d,i=l.substr(s+1).trim();return e},Qo=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)},Zo=function(t){var e=(t+"").split("("),n=P[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Xo(e[1])]:Qo(t).split(",").map(hr)):P._CE&&Wo.test(t)?P._CE("",t):n},Dr=function(t){return function(e){return 1-t(1-e)}},Nr=function r(t,e){for(var n=t._first,i;n;)n instanceof et?r(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?r(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next},Kt=function(t,e){return t&&(U(t)?t:P[t]||Zo(t))||e},Xt=function(t,e,n,i){n===void 0&&(n=function(l){return 1-e(1-l)}),i===void 0&&(i=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var o={easeIn:e,easeOut:n,easeInOut:i},a;return rt(t,function(s){P[s]=dt[s]=o,P[a=s.toLowerCase()]=n;for(var l in o)P[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=P[s+"."+l]=o[l]}),o},Fr=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},rn=function r(t,e,n){var i=e>=1?e:1,o=(n||(t?.3:.45))/(e<1?e:1),a=o/un*(Math.asin(1/i)||0),s=function(c){return c===1?1:i*Math.pow(2,-10*c)*Ao((c-a)*o)+1},l=t==="out"?s:t==="in"?function(d){return 1-s(1-d)}:Fr(s);return o=un/o,l.config=function(d,c){return r(t,d,c)},l},on=function r(t,e){e===void 0&&(e=1.70158);var n=function(a){return a?--a*a*((e+1)*a+e)+1:0},i=t==="out"?n:t==="in"?function(o){return 1-n(1-o)}:Fr(n);return i.config=function(o){return r(t,o)},i};rt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;Xt(r+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});P.Linear.easeNone=P.none=P.Linear.easeIn;Xt("Elastic",rn("in"),rn("out"),rn());(function(r,t){var e=1/t,n=2*e,i=2.5*e,o=function(s){return s<e?r*s*s:s<n?r*Math.pow(s-1.5/t,2)+.75:s<i?r*(s-=2.25/t)*s+.9375:r*Math.pow(s-2.625/t,2)+.984375};Xt("Bounce",function(a){return 1-o(1-a)},o)})(7.5625,2.75);Xt("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Xt("Circ",function(r){return-(nr(1-r*r)-1)});Xt("Sine",function(r){return r===1?1:-Io(r*xo)+1});Xt("Back",on("in"),on("out"),on());P.SteppedEase=P.steps=dt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,i=t+(e?0:1),o=e?1:0,a=1-L;return function(s){return((i*we(0,a,s)|0)+o)*n}}};oe.ease=P["quad.out"];rt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Nn+=r+","+r+"Params,"});var Or=function(t,e){this.id=Mo++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:cr,this.set=e?e.getSetter:Vn},Me=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,le(this,+e.duration,1,1),this.data=e.data,k&&(this._ctx=k,k.data.push(this)),xe||ut.wake()}var t=r.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,le(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,i){if(ue(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(je(this,n),!o._dp||o.parent||_r(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Et(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===L||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),dr(this,n,i)),this},t.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Xn(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},t.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Xn(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,i){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*o,i):this._repeat?ae(this._tTime,o)+1:1},t.timeScale=function(n,i){if(!arguments.length)return this._rts===-L?0:this._rts;if(this._rts===n)return this;var o=this.parent&&this._ts?He(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-L?0:this._rts,this.totalTime(we(-Math.abs(this._delay),this.totalDuration(),o),i!==!1),Ze(this),Fo(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ue(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==L&&(this._tTime-=L)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Et(i,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(it(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?He(i.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=Po);var i=Q;return Q=n,On(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Q=i,this},t.globalTime=function(n){for(var i=this,o=arguments.length?n:i.rawTime();i;)o=i._start+o/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):o},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Qn(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,Qn(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,i){return this.totalTime(mt(this,n),it(i))},t.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,it(i)),this._dur||(this._zTime=-L),this},t.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},t.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-L:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-L,this},t.isActive=function(){var n=this.parent||this._dp,i=this._start,o;return!!(!n||this._ts&&this._initted&&n.isActive()&&(o=n.rawTime(!0))>=i&&o<this.endTime(!0)-L)},t.eventCallback=function(n,i,o){var a=this.vars;return arguments.length>1?(i?(a[n]=i,o&&(a[n+"Params"]=o),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},t.then=function(n){var i=this;return new Promise(function(o){var a=U(n)?n:pr,s=function(){var d=i.then;i.then=null,U(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=d),o(a),i.then=d};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?s():i._prom=s})},t.kill=function(){pe(this)},r}();ht(Me.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-L,_prom:0,_ps:!1,_rts:1});var et=function(r){er(t,r);function t(n,i){var o;return n===void 0&&(n={}),o=r.call(this,n)||this,o.labels={},o.smoothChildTiming=!!n.smoothChildTiming,o.autoRemoveChildren=!!n.autoRemoveChildren,o._sort=it(n.sortChildren),b&&Et(n.parent||b,At(o),i),n.reversed&&o.reverse(),n.paused&&o.paused(!0),n.scrollTrigger&&gr(At(o),n.scrollTrigger),o}var e=t.prototype;return e.to=function(i,o,a){return ge(0,arguments,this),this},e.from=function(i,o,a){return ge(1,arguments,this),this},e.fromTo=function(i,o,a,s){return ge(2,arguments,this),this},e.set=function(i,o,a){return o.duration=0,o.parent=this,_e(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new z(i,o,mt(this,a),1),this},e.call=function(i,o,a){return Et(this,z.delayedCall(0,i,o),a)},e.staggerTo=function(i,o,a,s,l,d,c){return a.duration=o,a.stagger=a.stagger||s,a.onComplete=d,a.onCompleteParams=c,a.parent=this,new z(i,a,mt(this,l)),this},e.staggerFrom=function(i,o,a,s,l,d,c){return a.runBackwards=1,_e(a).immediateRender=it(a.immediateRender),this.staggerTo(i,o,a,s,l,d,c)},e.staggerFromTo=function(i,o,a,s,l,d,c,h){return s.startAt=a,_e(s).immediateRender=it(s.immediateRender),this.staggerTo(i,o,s,l,d,c,h)},e.render=function(i,o,a){var s=this._time,l=this._dirty?this.totalDuration():this._tDur,d=this._dur,c=i<=0?0:H(i),h=this._zTime<0!=i<0&&(this._initted||!d),m,_,g,p,y,T,C,E,x,v,M,A;if(this!==b&&c>l&&i>=0&&(c=l),c!==this._tTime||a||h){if(s!==this._time&&d&&(c+=this._time-s,i+=this._time-s),m=c,x=this._start,E=this._ts,T=!E,h&&(d||(s=this._zTime),(i||!o)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,y=d+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,o,a);if(m=H(c%y),c===l?(p=this._repeat,m=d):(v=H(c/y),p=~~v,p&&p===v&&(m=d,p--),m>d&&(m=d)),v=ae(this._tTime,y),!s&&this._tTime&&v!==p&&this._tTime-v*y-this._dur<=0&&(v=p),M&&p&1&&(m=d-m,A=1),p!==v&&!this._lock){var S=M&&v&1,I=S===(M&&p&1);if(p<v&&(S=!S),s=S?0:c%d?d:c,this._lock=1,this.render(s||(A?0:H(p*y)),o,!d)._lock=0,this._tTime=c,!o&&this.parent&&ft(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),s&&s!==this._time||T!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,l=this._tDur,I&&(this._lock=2,s=S?d:-1e-4,this.render(s,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!T)return this;Nr(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=bo(this,H(s),H(m)),C&&(c-=m-(m=C._start))),this._tTime=c,this._time=m,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,s=0),!s&&c&&!o&&!v&&(ft(this,"onStart"),this._tTime!==c))return this;if(m>=s&&i>=0)for(_=this._first;_;){if(g=_._next,(_._act||m>=_._start)&&_._ts&&C!==_){if(_.parent!==this)return this.render(i,o,a);if(_.render(_._ts>0?(m-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(m-_._start)*_._ts,o,a),m!==this._time||!this._ts&&!T){C=0,g&&(c+=this._zTime=-L);break}}_=g}else{_=this._last;for(var w=i<0?i:m;_;){if(g=_._prev,(_._act||w<=_._end)&&_._ts&&C!==_){if(_.parent!==this)return this.render(i,o,a);if(_.render(_._ts>0?(w-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(w-_._start)*_._ts,o,a||Q&&On(_)),m!==this._time||!this._ts&&!T){C=0,g&&(c+=this._zTime=w?-L:L);break}}_=g}}if(C&&!o&&(this.pause(),C.render(m>=s?0:-L)._zTime=m>=s?1:-1,this._ts))return this._start=x,Ze(this),this.render(i,o,a);this._onUpdate&&!o&&ft(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&s)&&(x===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((i||!d)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Lt(this,1),!o&&!(i<0&&!s)&&(c||s||!l)&&(ft(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(i,o){var a=this;if(wt(o)||(o=mt(this,o,i)),!(i instanceof Me)){if(j(i))return i.forEach(function(s){return a.add(s,o)}),this;if(W(i))return this.addLabel(i,o);if(U(i))i=z.delayedCall(0,i);else return this}return this!==i?Et(this,i,o):this},e.getChildren=function(i,o,a,s){i===void 0&&(i=!0),o===void 0&&(o=!0),a===void 0&&(a=!0),s===void 0&&(s=-_t);for(var l=[],d=this._first;d;)d._start>=s&&(d instanceof z?o&&l.push(d):(a&&l.push(d),i&&l.push.apply(l,d.getChildren(!0,o,a)))),d=d._next;return l},e.getById=function(i){for(var o=this.getChildren(1,1,1),a=o.length;a--;)if(o[a].vars.id===i)return o[a]},e.remove=function(i){return W(i)?this.removeLabel(i):U(i)?this.killTweensOf(i):(i.parent===this&&Qe(this,i),i===this._recent&&(this._recent=this._last),$t(this))},e.totalTime=function(i,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=H(ut.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,o),this._forcing=0,this):this._tTime},e.addLabel=function(i,o){return this.labels[i]=mt(this,o),this},e.removeLabel=function(i){return delete this.labels[i],this},e.addPause=function(i,o,a){var s=z.delayedCall(0,o||ve,a);return s.data="isPause",this._hasPause=1,Et(this,s,mt(this,i))},e.removePause=function(i){var o=this._first;for(i=mt(this,i);o;)o._start===i&&o.data==="isPause"&&Lt(o),o=o._next},e.killTweensOf=function(i,o,a){for(var s=this.getTweensOf(i,a),l=s.length;l--;)Rt!==s[l]&&s[l].kill(i,o);return this},e.getTweensOf=function(i,o){for(var a=[],s=gt(i),l=this._first,d=wt(o),c;l;)l instanceof z?Ro(l._targets,s)&&(d?(!Rt||l._initted&&l._ts)&&l.globalTime(0)<=o&&l.globalTime(l.totalDuration())>o:!o||l.isActive())&&a.push(l):(c=l.getTweensOf(s,o)).length&&a.push.apply(a,c),l=l._next;return a},e.tweenTo=function(i,o){o=o||{};var a=this,s=mt(a,i),l=o,d=l.startAt,c=l.onStart,h=l.onStartParams,m=l.immediateRender,_,g=z.to(a,ht({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:o.duration||Math.abs((s-(d&&"time"in d?d.time:a._time))/a.timeScale())||L,onStart:function(){if(a.pause(),!_){var y=o.duration||Math.abs((s-(d&&"time"in d?d.time:a._time))/a.timeScale());g._dur!==y&&le(g,y,0,1).render(g._time,!0,!0),_=1}c&&c.apply(g,h||[])}},o));return m?g.render(0):g},e.tweenFromTo=function(i,o,a){return this.tweenTo(o,ht({startAt:{time:mt(this,i)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(i){return i===void 0&&(i=this._time),Zn(this,mt(this,i))},e.previousLabel=function(i){return i===void 0&&(i=this._time),Zn(this,mt(this,i),1)},e.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+L)},e.shiftChildren=function(i,o,a){a===void 0&&(a=0);for(var s=this._first,l=this.labels,d;s;)s._start>=a&&(s._start+=i,s._end+=i),s=s._next;if(o)for(d in l)l[d]>=a&&(l[d]+=i);return $t(this)},e.invalidate=function(i){var o=this._first;for(this._lock=0;o;)o.invalidate(i),o=o._next;return r.prototype.invalidate.call(this,i)},e.clear=function(i){i===void 0&&(i=!0);for(var o=this._first,a;o;)a=o._next,this.remove(o),o=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),$t(this)},e.totalDuration=function(i){var o=0,a=this,s=a._last,l=_t,d,c,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(h=a.parent;s;)d=s._prev,s._dirty&&s.totalDuration(),c=s._start,c>l&&a._sort&&s._ts&&!a._lock?(a._lock=1,Et(a,s,c-s._delay,1)._lock=0):l=c,c<0&&s._ts&&(o-=c,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),l=0),s._end>o&&s._ts&&(o=s._end),s=d;le(a,a===b&&a._time>o?a._time:o,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(i){if(b._ts&&(dr(b,He(i,b)),fr=ut.frame),ut.frame>=Wn){Wn+=ct.autoSleep||120;var o=b._first;if((!o||!o._ts)&&ct.autoSleep&&ut._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||ut.sleep()}}},t}(Me);ht(et.prototype,{_lock:0,_hasPause:0,_forcing:0});var jo=function(t,e,n,i,o,a,s){var l=new ot(this._pt,t,e,0,1,qr,null,o),d=0,c=0,h,m,_,g,p,y,T,C;for(l.b=n,l.e=i,n+="",i+="",(T=~i.indexOf("random("))&&(i=Ee(i)),a&&(C=[n,i],a(C,t,e),n=C[0],i=C[1]),m=n.match(tn)||[];h=tn.exec(i);)g=h[0],p=i.substring(d,h.index),_?_=(_+1)%5:p.substr(-5)==="rgba("&&(_=1),g!==m[c++]&&(y=parseFloat(m[c-1])||0,l._pt={_next:l._pt,p:p||c===1?p:",",s:y,c:g.charAt(1)==="="?ee(y,g)-y:parseFloat(g)-y,m:_&&_<4?Math.round:0},d=tn.lastIndex);return l.c=d<i.length?i.substring(d,i.length):"",l.fp=s,(or.test(i)||T)&&(l.e=0),this._pt=l,l},Ln=function(t,e,n,i,o,a,s,l,d,c){U(i)&&(i=i(o||0,t,a));var h=t[e],m=n!=="get"?n:U(h)?d?t[e.indexOf("set")||!U(t["get"+e.substr(3)])?e:"get"+e.substr(3)](d):t[e]():h,_=U(h)?d?rs:Vr:bn,g;if(W(i)&&(~i.indexOf("random(")&&(i=Ee(i)),i.charAt(1)==="="&&(g=ee(m,i)+(Z(m)||0),(g||g===0)&&(i=g))),!c||m!==i||yn)return!isNaN(m*i)&&i!==""?(g=new ot(this._pt,t,e,+m||0,i-(m||0),typeof h=="boolean"?ss:Ur,0,_),d&&(g.fp=d),s&&g.modifier(s,this,t),this._pt=g):(!h&&!(e in t)&&Rn(e,i),jo.call(this,t,e,m,i,_,l||ct.stringFilter,d))},ts=function(t,e,n,i,o){if(U(t)&&(t=ye(t,o,e,n,i)),!Mt(t)||t.style&&t.nodeType||j(t)||ir(t))return W(t)?ye(t,o,e,n,i):t;var a={},s;for(s in t)a[s]=ye(t[s],o,e,n,i);return a},Lr=function(t,e,n,i,o,a){var s,l,d,c;if(lt[t]&&(s=new lt[t]).init(o,s.rawVars?e[t]:ts(e[t],i,o,a,n),n,i,a)!==!1&&(n._pt=l=new ot(n._pt,o,t,0,1,s.render,s,0,s.priority),n!==te))for(d=n._ptLookup[n._targets.indexOf(o)],c=s._props.length;c--;)d[s._props[c]]=l;return s},Rt,yn,kn=function r(t,e,n){var i=t.vars,o=i.ease,a=i.startAt,s=i.immediateRender,l=i.lazy,d=i.onUpdate,c=i.runBackwards,h=i.yoyoEase,m=i.keyframes,_=i.autoRevert,g=t._dur,p=t._startAt,y=t._targets,T=t.parent,C=T&&T.data==="nested"?T.vars.targets:y,E=t._overwrite==="auto"&&!An,x=t.timeline,v,M,A,S,I,w,F,D,R,J,Y,B,$;if(x&&(!m||!o)&&(o="none"),t._ease=Kt(o,oe.ease),t._yEase=h?Dr(Kt(h===!0?o:h,oe.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!x&&!!i.runBackwards,!x||m&&!i.stagger){if(D=y[0]?Yt(y[0]).harness:0,B=D&&i[D.prop],v=ze(i,Dn),p&&(p._zTime<0&&p.progress(1),e<0&&c&&s&&!_?p.render(-1,!0):p.revert(c&&g?Le:wo),p._lazy=0),a){if(Lt(t._startAt=z.set(y,ht({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:!p&&it(l),startAt:null,delay:0,onUpdate:d&&function(){return ft(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Q||!s&&!_)&&t._startAt.revert(Le),s&&g&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(c&&g&&!p){if(e&&(s=!1),A=ht({overwrite:!1,data:"isFromStart",lazy:s&&!p&&it(l),immediateRender:s,stagger:0,parent:T},v),B&&(A[D.prop]=B),Lt(t._startAt=z.set(y,A)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Q?t._startAt.revert(Le):t._startAt.render(-1,!0)),t._zTime=e,!s)r(t._startAt,L,L);else if(!e)return}for(t._pt=t._ptCache=0,l=g&&it(l)||l&&!g,M=0;M<y.length;M++){if(I=y[M],F=I._gsap||Fn(y)[M]._gsap,t._ptLookup[M]=J={},dn[F.id]&&Ft.length&&Be(),Y=C===y?M:C.indexOf(I),D&&(R=new D).init(I,B||v,t,Y,C)!==!1&&(t._pt=S=new ot(t._pt,I,R.name,0,1,R.render,R,0,R.priority),R._props.forEach(function(Tt){J[Tt]=S}),R.priority&&(w=1)),!D||B)for(A in v)lt[A]&&(R=Lr(A,v,t,Y,I,C))?R.priority&&(w=1):J[A]=S=Ln.call(t,I,A,"get",v[A],Y,C,0,i.stringFilter);t._op&&t._op[M]&&t.kill(I,t._op[M]),E&&t._pt&&(Rt=t,b.killTweensOf(I,J,t.globalTime(e)),$=!t.parent,Rt=0),t._pt&&l&&(dn[F.id]=1)}w&&Gr(t),t._onInit&&t._onInit(t)}t._onUpdate=d,t._initted=(!t._op||t._pt)&&!$,m&&e<=0&&x.render(_t,!0,!0)},es=function(t,e,n,i,o,a,s,l){var d=(t._pt&&t._ptCache||(t._ptCache={}))[e],c,h,m,_;if(!d)for(d=t._ptCache[e]=[],m=t._ptLookup,_=t._targets.length;_--;){if(c=m[_][e],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return yn=1,t.vars[e]="+=0",kn(t,s),yn=0,l?Te(e+" not eligible for reset"):1;d.push(c)}for(_=d.length;_--;)h=d[_],c=h._pt||h,c.s=(i||i===0)&&!o?i:c.s+(i||0)+a*c.c,c.c=n-c.s,h.e&&(h.e=G(n)+Z(h.e)),h.b&&(h.b=c.s+Z(h.b))},ns=function(t,e){var n=t[0]?Yt(t[0]).harness:0,i=n&&n.aliases,o,a,s,l;if(!i)return e;o=se({},e);for(a in i)if(a in o)for(l=i[a].split(","),s=l.length;s--;)o[l[s]]=o[a];return o},is=function(t,e,n,i){var o=e.ease||i||"power1.inOut",a,s;if(j(e))s=n[t]||(n[t]=[]),e.forEach(function(l,d){return s.push({t:d/(e.length-1)*100,v:l,e:o})});else for(a in e)s=n[a]||(n[a]=[]),a==="ease"||s.push({t:parseFloat(t),v:e[a],e:o})},ye=function(t,e,n,i,o){return U(t)?t.call(e,n,i,o):W(t)&&~t.indexOf("random(")?Ee(t):t},kr=Nn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",br={};rt(kr+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return br[r]=1});var z=function(r){er(t,r);function t(n,i,o,a){var s;typeof i=="number"&&(o.duration=i,i=o,o=null),s=r.call(this,a?i:_e(i))||this;var l=s.vars,d=l.duration,c=l.delay,h=l.immediateRender,m=l.stagger,_=l.overwrite,g=l.keyframes,p=l.defaults,y=l.scrollTrigger,T=l.yoyoEase,C=i.parent||b,E=(j(n)||ir(n)?wt(n[0]):"length"in i)?[n]:gt(n),x,v,M,A,S,I,w,F;if(s._targets=E.length?Fn(E):Te("GSAP target "+n+" not found. https://gsap.com",!ct.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=_,g||m||Fe(d)||Fe(c)){if(i=s.vars,x=s.timeline=new et({data:"nested",defaults:p||{},targets:C&&C.data==="nested"?C.vars.targets:E}),x.kill(),x.parent=x._dp=At(s),x._start=0,m||Fe(d)||Fe(c)){if(A=E.length,w=m&&vr(m),Mt(m))for(S in m)~kr.indexOf(S)&&(F||(F={}),F[S]=m[S]);for(v=0;v<A;v++)M=ze(i,br),M.stagger=0,T&&(M.yoyoEase=T),F&&se(M,F),I=E[v],M.duration=+ye(d,At(s),v,I,E),M.delay=(+ye(c,At(s),v,I,E)||0)-s._delay,!m&&A===1&&M.delay&&(s._delay=c=M.delay,s._start+=c,M.delay=0),x.to(I,M,w?w(v,I,E):0),x._ease=P.none;x.duration()?d=c=0:s.timeline=0}else if(g){_e(ht(x.vars.defaults,{ease:"none"})),x._ease=Kt(g.ease||i.ease||"none");var D=0,R,J,Y;if(j(g))g.forEach(function(B){return x.to(E,B,">")}),x.duration();else{M={};for(S in g)S==="ease"||S==="easeEach"||is(S,g[S],M,g.easeEach);for(S in M)for(R=M[S].sort(function(B,$){return B.t-$.t}),D=0,v=0;v<R.length;v++)J=R[v],Y={ease:J.e,duration:(J.t-(v?R[v-1].t:0))/100*d},Y[S]=J.v,x.to(E,Y,D),D+=Y.duration;x.duration()<d&&x.to({},{duration:d-x.duration()})}}d||s.duration(d=x.duration())}else s.timeline=0;return _===!0&&!An&&(Rt=At(s),b.killTweensOf(E),Rt=0),Et(C,At(s),o),i.reversed&&s.reverse(),i.paused&&s.paused(!0),(h||!d&&!g&&s._start===H(C._time)&&it(h)&&Oo(At(s))&&C.data!=="nested")&&(s._tTime=-L,s.render(Math.max(0,-c)||0)),y&&gr(At(s),y),s}var e=t.prototype;return e.render=function(i,o,a){var s=this._time,l=this._tDur,d=this._dur,c=i<0,h=i>l-L&&!c?l:i<L?0:i,m,_,g,p,y,T,C,E,x;if(!d)ko(this,i,o,a);else if(h!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(m=h,E=this.timeline,this._repeat){if(p=d+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+i,o,a);if(m=H(h%p),h===l?(g=this._repeat,m=d):(y=H(h/p),g=~~y,g&&g===y?(m=d,g--):m>d&&(m=d)),T=this._yoyo&&g&1,T&&(x=this._yEase,m=d-m),y=ae(this._tTime,p),m===s&&!a&&this._initted&&g===y)return this._tTime=h,this;g!==y&&(E&&this._yEase&&Nr(E,T),this.vars.repeatRefresh&&!T&&!this._lock&&m!==p&&this._initted&&(this._lock=a=1,this.render(H(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(yr(this,c?i:m,a,o,h))return this._tTime=0,this;if(s!==this._time&&!(a&&this.vars.repeatRefresh&&g!==y))return this;if(d!==this._dur)return this.render(i,o,a)}if(this._tTime=h,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(x||this._ease)(m/d),this._from&&(this.ratio=C=1-C),!s&&h&&!o&&!y&&(ft(this,"onStart"),this._tTime!==h))return this;for(_=this._pt;_;)_.r(C,_.d),_=_._next;E&&E.render(i<0?i:E._dur*E._ease(m/this._dur),o,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!o&&(c&&hn(this,i,o,a),ft(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!o&&this.parent&&ft(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&hn(this,i,!0,!0),(i||!d)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Lt(this,1),!o&&!(c&&!s)&&(h||s||T)&&(ft(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},e.resetTo=function(i,o,a,s,l){xe||ut.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||kn(this,d),c=this._ease(d/this._dur),es(this,i,o,a,s,c,d,l)?this.resetTo(i,o,a,s,1):(je(this,0),this.parent||mr(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(i,o){if(o===void 0&&(o="all"),!i&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?pe(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Q),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,o,Rt&&Rt.vars.overwrite!==!0)._first||pe(this),this.parent&&a!==this.timeline.totalDuration()&&le(this,this._dur*this.timeline._tDur/a,0,1),this}var s=this._targets,l=i?gt(i):s,d=this._ptLookup,c=this._pt,h,m,_,g,p,y,T;if((!o||o==="all")&&No(s,l))return o==="all"&&(this._pt=0),pe(this);for(h=this._op=this._op||[],o!=="all"&&(W(o)&&(p={},rt(o,function(C){return p[C]=1}),o=p),o=ns(s,o)),T=s.length;T--;)if(~l.indexOf(s[T])){m=d[T],o==="all"?(h[T]=o,g=m,_={}):(_=h[T]=h[T]||{},g=o);for(p in g)y=m&&m[p],y&&((!("kill"in y.d)||y.d.kill(p)===!0)&&Qe(this,y,"_pt"),delete m[p]),_!=="all"&&(_[p]=1)}return this._initted&&!this._pt&&c&&pe(this),this},t.to=function(i,o){return new t(i,o,arguments[2])},t.from=function(i,o){return ge(1,arguments)},t.delayedCall=function(i,o,a,s){return new t(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:o,onReverseComplete:o,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:s})},t.fromTo=function(i,o,a){return ge(2,arguments)},t.set=function(i,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new t(i,o)},t.killTweensOf=function(i,o,a){return b.killTweensOf(i,o,a)},t}(Me);ht(z.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});rt("staggerTo,staggerFrom,staggerFromTo",function(r){z[r]=function(){var t=new et,e=mn.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var bn=function(t,e,n){return t[e]=n},Vr=function(t,e,n){return t[e](n)},rs=function(t,e,n,i){return t[e](i.fp,n)},os=function(t,e,n){return t.setAttribute(e,n)},Vn=function(t,e){return U(t[e])?Vr:Sn(t[e])&&t.setAttribute?os:bn},Ur=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},ss=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},qr=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(t===1&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Un=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},as=function(t,e,n,i){for(var o=this._pt,a;o;)a=o._next,o.p===i&&o.modifier(t,e,n),o=a},ls=function(t){for(var e=this._pt,n,i;e;)i=e._next,e.p===t&&!e.op||e.op===t?Qe(this,e,"_pt"):e.dep||(n=1),e=i;return!n},us=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},Gr=function(t){for(var e=t._pt,n,i,o,a;e;){for(n=e._next,i=o;i&&i.pr>e.pr;)i=i._next;(e._prev=i?i._prev:a)?e._prev._next=e:o=e,(e._next=i)?i._prev=e:a=e,e=n}t._pt=o},ot=function(){function r(e,n,i,o,a,s,l,d,c){this.t=n,this.s=o,this.c=a,this.p=i,this.r=s||Ur,this.d=l||this,this.set=d||bn,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(n,i,o){this.mSet=this.mSet||this.set,this.set=us,this.m=n,this.mt=o,this.tween=i},r}();rt(Nn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Dn[r]=1});dt.TweenMax=dt.TweenLite=z;dt.TimelineLite=dt.TimelineMax=et;b=new et({sortChildren:!1,defaults:oe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ct.stringFilter=Rr;var Wt=[],be={},fs=[],ti=0,cs=0,sn=function(t){return(be[t]||fs).map(function(e){return e()})},Cn=function(){var t=Date.now(),e=[];t-ti>2&&(sn("matchMediaInit"),Wt.forEach(function(n){var i=n.queries,o=n.conditions,a,s,l,d;for(s in i)a=vt.matchMedia(i[s]).matches,a&&(l=1),a!==o[s]&&(o[s]=a,d=1);d&&(n.revert(),l&&e.push(n))}),sn("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),ti=t,sn("matchMedia"))},Br=function(){function r(e,n){this.selector=n&&_n(n),this.data=[],this._r=[],this.isReverted=!1,this.id=cs++,e&&this.add(e)}var t=r.prototype;return t.add=function(n,i,o){U(n)&&(o=i,i=n,n=U);var a=this,s=function(){var d=k,c=a.selector,h;return d&&d!==a&&d.data.push(a),o&&(a.selector=_n(o)),k=a,h=i.apply(a,arguments),U(h)&&a._r.push(h),k=d,a.selector=c,a.isReverted=!1,h};return a.last=s,n===U?s(a,function(l){return a.add(null,l)}):n?a[n]=s:s},t.ignore=function(n){var i=k;k=null,n(this),k=i},t.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof z&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,i){var o=this;if(n?function(){for(var s=o.getTweens(),l=o.data.length,d;l--;)d=o.data[l],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(c){return s.splice(s.indexOf(c),1)}));for(s.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),l=o.data.length;l--;)d=o.data[l],d instanceof et?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof z)&&d.revert&&d.revert(n);o._r.forEach(function(c){return c(n,o)}),o.isReverted=!0}():this.data.forEach(function(s){return s.kill&&s.kill()}),this.clear(),i)for(var a=Wt.length;a--;)Wt[a].id===this.id&&Wt.splice(a,1)},t.revert=function(n){this.kill(n||{})},r}(),ds=function(){function r(e){this.contexts=[],this.scope=e,k&&k.data.push(this)}var t=r.prototype;return t.add=function(n,i,o){Mt(n)||(n={matches:n});var a=new Br(0,o||this.scope),s=a.conditions={},l,d,c;k&&!a.selector&&(a.selector=k.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(d in n)d==="all"?c=1:(l=vt.matchMedia(n[d]),l&&(Wt.indexOf(a)<0&&Wt.push(a),(s[d]=l.matches)&&(c=1),l.addListener?l.addListener(Cn):l.addEventListener("change",Cn)));return c&&i(a,function(h){return a.add(null,h)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),Ye={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(i){return Sr(i)})},timeline:function(t){return new et(t)},getTweensOf:function(t,e){return b.getTweensOf(t,e)},getProperty:function(t,e,n,i){W(t)&&(t=gt(t)[0]);var o=Yt(t||{}).get,a=n?pr:hr;return n==="native"&&(n=""),t&&(e?a((lt[e]&&lt[e].get||o)(t,e,n,i)):function(s,l,d){return a((lt[s]&&lt[s].get||o)(t,s,l,d))})},quickSetter:function(t,e,n){if(t=gt(t),t.length>1){var i=t.map(function(c){return at.quickSetter(c,e,n)}),o=i.length;return function(c){for(var h=o;h--;)i[h](c)}}t=t[0]||{};var a=lt[e],s=Yt(t),l=s.harness&&(s.harness.aliases||{})[e]||e,d=a?function(c){var h=new a;te._pt=0,h.init(t,n?c+n:c,te,0,[t]),h.render(1,h),te._pt&&Un(1,te)}:s.set(t,l);return a?d:function(c){return d(t,l,n?c+n:c,s,1)}},quickTo:function(t,e,n){var i,o=at.to(t,ht((i={},i[e]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),a=function(l,d,c){return o.resetTo(e,l,d,c)};return a.tween=o,a},isTweening:function(t){return b.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Kt(t.ease,oe.ease)),Jn(oe,t||{})},config:function(t){return Jn(ct,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,o=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach(function(s){return s&&!lt[s]&&!dt[s]&&Te(e+" effect requires "+s+" plugin.")}),en[e]=function(s,l,d){return n(gt(s),ht(l||{},o),d)},a&&(et.prototype[e]=function(s,l,d){return this.add(en[e](s,Mt(l)?l:(d=l)&&{},this),d)})},registerEase:function(t,e){P[t]=Kt(e)},parseEase:function(t,e){return arguments.length?Kt(t,e):P},getById:function(t){return b.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new et(t),i,o;for(n.smoothChildTiming=it(t.smoothChildTiming),b.remove(n),n._dp=0,n._time=n._tTime=b._time,i=b._first;i;)o=i._next,(e||!(!i._dur&&i instanceof z&&i.vars.onComplete===i._targets[0]))&&Et(n,i,i._start-i._delay),i=o;return Et(b,n,0),n},context:function(t,e){return t?new Br(t,e):k},matchMedia:function(t){return new ds(t)},matchMediaRefresh:function(){return Wt.forEach(function(t){var e=t.conditions,n,i;for(i in e)e[i]&&(e[i]=!1,n=1);n&&t.revert()})||Cn()},addEventListener:function(t,e){var n=be[t]||(be[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=be[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:Ho,wrapYoyo:Yo,distribute:vr,random:xr,snap:Er,normalize:zo,getUnit:Z,clamp:Uo,splitColor:wr,toArray:gt,selector:_n,mapRange:Ir,pipe:Go,unitize:Bo,interpolate:$o,shuffle:Tr},install:lr,effects:en,ticker:ut,updateRoot:et.updateRoot,plugins:lt,globalTimeline:b,core:{PropTween:ot,globals:ur,Tween:z,Timeline:et,Animation:Me,getCache:Yt,_removeLinkedListItem:Qe,reverting:function(){return Q},context:function(t){return t&&k&&(k.data.push(t),t._ctx=k),k},suppressOverwrites:function(t){return An=t}}};rt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Ye[r]=z[r]});ut.add(et.updateRoot);te=Ye.to({},{duration:0});var hs=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},ps=function(t,e){var n=t._targets,i,o,a;for(i in e)for(o=n.length;o--;)a=t._ptLookup[o][i],a&&(a=a.d)&&(a._pt&&(a=hs(a,i)),a&&a.modifier&&a.modifier(e[i],t,n[o],i))},an=function(t,e){return{name:t,headless:1,rawVars:1,init:function(i,o,a){a._onInit=function(s){var l,d;if(W(o)&&(l={},rt(o,function(c){return l[c]=1}),o=l),e){l={};for(d in o)l[d]=e(o[d]);o=l}ps(s,o)}}}},at=Ye.registerPlugin({name:"attr",init:function(t,e,n,i,o){var a,s,l;this.tween=n;for(a in e)l=t.getAttribute(a)||"",s=this.add(t,"setAttribute",(l||0)+"",e[a],i,o,0,0,a),s.op=a,s.b=l,this._props.push(a)},render:function(t,e){for(var n=e._pt;n;)Q?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},an("roundProps",gn),an("modifiers"),an("snap",Er))||Ye;z.version=et.version=at.version="3.13.0";ar=1;wn()&&ue();P.Power0;P.Power1;P.Power2;P.Power3;P.Power4;P.Linear;P.Quad;P.Cubic;P.Quart;P.Quint;P.Strong;P.Elastic;P.Back;P.SteppedEase;P.Bounce;P.Sine;P.Expo;P.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ei,Dt,ne,qn,Ht,ni,Gn,ms=function(){return typeof window<"u"},Pt={},zt=180/Math.PI,ie=Math.PI/180,Zt=Math.atan2,ii=1e8,Bn=/([A-Z])/g,_s=/(left|right|width|margin|padding|x)/i,gs=/[\s,\(]\S/,xt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},ys=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Cs=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Ts=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},zr=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Hr=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},vs=function(t,e,n){return t.style[e]=n},Es=function(t,e,n){return t.style.setProperty(e,n)},xs=function(t,e,n){return t._gsap[e]=n},Ms=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Is=function(t,e,n,i,o){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(o,a)},As=function(t,e,n,i,o){var a=t._gsap;a[e]=n,a.renderTransform(o,a)},V="transform",st=V+"Origin",Ss=function r(t,e){var n=this,i=this.target,o=i.style,a=i._gsap;if(t in Pt&&o){if(this.tfm=this.tfm||{},t!=="transform")t=xt[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return n.tfm[s]=St(i,s)}):this.tfm[t]=a.x?a[t]:St(i,t),t===st&&(this.tfm.zOrigin=a.zOrigin);else return xt.transform.split(",").forEach(function(s){return r.call(n,s,e)});if(this.props.indexOf(V)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(st,e,"")),t=V}(o||e)&&this.props.push(t,e,o[t])},Yr=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ws=function(){var t=this.props,e=this.target,n=e.style,i=e._gsap,o,a;for(o=0;o<t.length;o+=3)t[o+1]?t[o+1]===2?e[t[o]](t[o+2]):e[t[o]]=t[o+2]:t[o+2]?n[t[o]]=t[o+2]:n.removeProperty(t[o].substr(0,2)==="--"?t[o]:t[o].replace(Bn,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),o=Gn(),(!o||!o.isStart)&&!n[V]&&(Yr(n),i.zOrigin&&n[st]&&(n[st]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},$r=function(t,e){var n={target:t,props:[],revert:ws,save:Ss};return t._gsap||at.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(i){return n.save(i)}),n},Kr,vn=function(t,e){var n=Dt.createElementNS?Dt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Dt.createElement(t);return n&&n.style?n:Dt.createElement(t)},yt=function r(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(Bn,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&r(t,fe(e)||e,1)||""},ri="O,Moz,ms,Ms,Webkit".split(","),fe=function(t,e,n){var i=e||Ht,o=i.style,a=5;if(t in o&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(ri[a]+t in o););return a<0?null:(a===3?"ms":a>=0?ri[a]:"")+t},En=function(){ms()&&window.document&&(ei=window,Dt=ei.document,ne=Dt.documentElement,Ht=vn("div")||{style:{}},vn("div"),V=fe(V),st=V+"Origin",Ht.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Kr=!!fe("perspective"),Gn=at.core.reverting,qn=1)},oi=function(t){var e=t.ownerSVGElement,n=vn("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),o;i.style.display="block",n.appendChild(i),ne.appendChild(n);try{o=i.getBBox()}catch{}return n.removeChild(i),ne.removeChild(n),o},si=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Wr=function(t){var e,n;try{e=t.getBBox()}catch{e=oi(t),n=1}return e&&(e.width||e.height)||n||(e=oi(t)),e&&!e.width&&!e.x&&!e.y?{x:+si(t,["x","cx","x1"])||0,y:+si(t,["y","cy","y1"])||0,width:0,height:0}:e},Jr=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Wr(t))},Jt=function(t,e){if(e){var n=t.style,i;e in Pt&&e!==st&&(e=V),n.removeProperty?(i=e.substr(0,2),(i==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(i==="--"?e:e.replace(Bn,"-$1").toLowerCase())):n.removeAttribute(e)}},Nt=function(t,e,n,i,o,a){var s=new ot(t._pt,e,n,0,1,a?Hr:zr);return t._pt=s,s.b=i,s.e=o,t._props.push(n),s},ai={deg:1,rad:1,turn:1},Ps={grid:1,flex:1},kt=function r(t,e,n,i){var o=parseFloat(n)||0,a=(n+"").trim().substr((o+"").length)||"px",s=Ht.style,l=_s.test(e),d=t.tagName.toLowerCase()==="svg",c=(d?"client":"offset")+(l?"Width":"Height"),h=100,m=i==="px",_=i==="%",g,p,y,T;if(i===a||!o||ai[i]||ai[a])return o;if(a!=="px"&&!m&&(o=r(t,e,n,"px")),T=t.getCTM&&Jr(t),(_||a==="%")&&(Pt[e]||~e.indexOf("adius")))return g=T?t.getBBox()[l?"width":"height"]:t[c],G(_?o/g*h:o/100*g);if(s[l?"width":"height"]=h+(m?a:i),p=i!=="rem"&&~e.indexOf("adius")||i==="em"&&t.appendChild&&!d?t:t.parentNode,T&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===Dt||!p.appendChild)&&(p=Dt.body),y=p._gsap,y&&_&&y.width&&l&&y.time===ut.time&&!y.uncache)return G(o/y.width*h);if(_&&(e==="height"||e==="width")){var C=t.style[e];t.style[e]=h+i,g=t[c],C?t.style[e]=C:Jt(t,e)}else(_||a==="%")&&!Ps[yt(p,"display")]&&(s.position=yt(t,"position")),p===t&&(s.position="static"),p.appendChild(Ht),g=Ht[c],p.removeChild(Ht),s.position="absolute";return l&&_&&(y=Yt(p),y.time=ut.time,y.width=p[c]),G(m?g*o/h:g&&o?h/g*o:0)},St=function(t,e,n,i){var o;return qn||En(),e in xt&&e!=="transform"&&(e=xt[e],~e.indexOf(",")&&(e=e.split(",")[0])),Pt[e]&&e!=="transform"?(o=Ae(t,i),o=e!=="transformOrigin"?o[e]:o.svg?o.origin:Ke(yt(t,st))+" "+o.zOrigin+"px"):(o=t.style[e],(!o||o==="auto"||i||~(o+"").indexOf("calc("))&&(o=$e[e]&&$e[e](t,e,n)||yt(t,e)||cr(t,e)||(e==="opacity"?1:0))),n&&!~(o+"").trim().indexOf(" ")?kt(t,e,o,n)+n:o},Rs=function(t,e,n,i){if(!n||n==="none"){var o=fe(e,t,1),a=o&&yt(t,o,1);a&&a!==n?(e=o,n=a):e==="borderColor"&&(n=yt(t,"borderTopColor"))}var s=new ot(this._pt,t.style,e,0,1,qr),l=0,d=0,c,h,m,_,g,p,y,T,C,E,x,v;if(s.b=n,s.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=yt(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(p=t.style[e],t.style[e]=i,i=yt(t,e)||i,p?t.style[e]=p:Jt(t,e)),c=[n,i],Rr(c),n=c[0],i=c[1],m=n.match(jt)||[],v=i.match(jt)||[],v.length){for(;h=jt.exec(i);)y=h[0],C=i.substring(l,h.index),g?g=(g+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(g=1),y!==(p=m[d++]||"")&&(_=parseFloat(p)||0,x=p.substr((_+"").length),y.charAt(1)==="="&&(y=ee(_,y)+x),T=parseFloat(y),E=y.substr((T+"").length),l=jt.lastIndex-E.length,E||(E=E||ct.units[e]||x,l===i.length&&(i+=E,s.e+=E)),x!==E&&(_=kt(t,e,p,E)||0),s._pt={_next:s._pt,p:C||d===1?C:",",s:_,c:T-_,m:g&&g<4||e==="zIndex"?Math.round:0});s.c=l<i.length?i.substring(l,i.length):""}else s.r=e==="display"&&i==="none"?Hr:zr;return or.test(i)&&(s.e=0),this._pt=s,s},li={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ds=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(t=n,n=i,i=t),e[0]=li[n]||n,e[1]=li[i]||i,e.join(" ")},Ns=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,i=n.style,o=e.u,a=n._gsap,s,l,d;if(o==="all"||o===!0)i.cssText="",l=1;else for(o=o.split(","),d=o.length;--d>-1;)s=o[d],Pt[s]&&(l=1,s=s==="transformOrigin"?st:V),Jt(n,s);l&&(Jt(n,V),a&&(a.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Ae(n,1),a.uncache=1,Yr(i)))}},$e={clearProps:function(t,e,n,i,o){if(o.data!=="isFromStart"){var a=t._pt=new ot(t._pt,e,n,0,0,Ns);return a.u=i,a.pr=-10,a.tween=o,t._props.push(n),1}}},Ie=[1,0,0,1,0,0],Xr={},Qr=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ui=function(t){var e=yt(t,V);return Qr(e)?Ie:e.substr(7).match(rr).map(G)},zn=function(t,e){var n=t._gsap||Yt(t),i=t.style,o=ui(t),a,s,l,d;return n.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,o=[l.a,l.b,l.c,l.d,l.e,l.f],o.join(",")==="1,0,0,1,0,0"?Ie:o):(o===Ie&&!t.offsetParent&&t!==ne&&!n.svg&&(l=i.display,i.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(d=1,s=t.nextElementSibling,ne.appendChild(t)),o=ui(t),l?i.display=l:Jt(t,"display"),d&&(s?a.insertBefore(t,s):a?a.appendChild(t):ne.removeChild(t))),e&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},xn=function(t,e,n,i,o,a){var s=t._gsap,l=o||zn(t,!0),d=s.xOrigin||0,c=s.yOrigin||0,h=s.xOffset||0,m=s.yOffset||0,_=l[0],g=l[1],p=l[2],y=l[3],T=l[4],C=l[5],E=e.split(" "),x=parseFloat(E[0])||0,v=parseFloat(E[1])||0,M,A,S,I;n?l!==Ie&&(A=_*y-g*p)&&(S=x*(y/A)+v*(-p/A)+(p*C-y*T)/A,I=x*(-g/A)+v*(_/A)-(_*C-g*T)/A,x=S,v=I):(M=Wr(t),x=M.x+(~E[0].indexOf("%")?x/100*M.width:x),v=M.y+(~(E[1]||E[0]).indexOf("%")?v/100*M.height:v)),i||i!==!1&&s.smooth?(T=x-d,C=v-c,s.xOffset=h+(T*_+C*p)-T,s.yOffset=m+(T*g+C*y)-C):s.xOffset=s.yOffset=0,s.xOrigin=x,s.yOrigin=v,s.smooth=!!i,s.origin=e,s.originIsAbsolute=!!n,t.style[st]="0px 0px",a&&(Nt(a,s,"xOrigin",d,x),Nt(a,s,"yOrigin",c,v),Nt(a,s,"xOffset",h,s.xOffset),Nt(a,s,"yOffset",m,s.yOffset)),t.setAttribute("data-svg-origin",x+" "+v)},Ae=function(t,e){var n=t._gsap||new Or(t);if("x"in n&&!e&&!n.uncache)return n;var i=t.style,o=n.scaleX<0,a="px",s="deg",l=getComputedStyle(t),d=yt(t,st)||"0",c,h,m,_,g,p,y,T,C,E,x,v,M,A,S,I,w,F,D,R,J,Y,B,$,Tt,Re,ce,de,Ut,Kn,It,qt;return c=h=m=p=y=T=C=E=x=0,_=g=1,n.svg=!!(t.getCTM&&Jr(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[V]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[V]!=="none"?l[V]:"")),i.scale=i.rotate=i.translate="none"),A=zn(t,n.svg),n.svg&&(n.uncache?(Tt=t.getBBox(),d=n.xOrigin-Tt.x+"px "+(n.yOrigin-Tt.y)+"px",$=""):$=!e&&t.getAttribute("data-svg-origin"),xn(t,$||d,!!$||n.originIsAbsolute,n.smooth!==!1,A)),v=n.xOrigin||0,M=n.yOrigin||0,A!==Ie&&(F=A[0],D=A[1],R=A[2],J=A[3],c=Y=A[4],h=B=A[5],A.length===6?(_=Math.sqrt(F*F+D*D),g=Math.sqrt(J*J+R*R),p=F||D?Zt(D,F)*zt:0,C=R||J?Zt(R,J)*zt+p:0,C&&(g*=Math.abs(Math.cos(C*ie))),n.svg&&(c-=v-(v*F+M*R),h-=M-(v*D+M*J))):(qt=A[6],Kn=A[7],ce=A[8],de=A[9],Ut=A[10],It=A[11],c=A[12],h=A[13],m=A[14],S=Zt(qt,Ut),y=S*zt,S&&(I=Math.cos(-S),w=Math.sin(-S),$=Y*I+ce*w,Tt=B*I+de*w,Re=qt*I+Ut*w,ce=Y*-w+ce*I,de=B*-w+de*I,Ut=qt*-w+Ut*I,It=Kn*-w+It*I,Y=$,B=Tt,qt=Re),S=Zt(-R,Ut),T=S*zt,S&&(I=Math.cos(-S),w=Math.sin(-S),$=F*I-ce*w,Tt=D*I-de*w,Re=R*I-Ut*w,It=J*w+It*I,F=$,D=Tt,R=Re),S=Zt(D,F),p=S*zt,S&&(I=Math.cos(S),w=Math.sin(S),$=F*I+D*w,Tt=Y*I+B*w,D=D*I-F*w,B=B*I-Y*w,F=$,Y=Tt),y&&Math.abs(y)+Math.abs(p)>359.9&&(y=p=0,T=180-T),_=G(Math.sqrt(F*F+D*D+R*R)),g=G(Math.sqrt(B*B+qt*qt)),S=Zt(Y,B),C=Math.abs(S)>2e-4?S*zt:0,x=It?1/(It<0?-It:It):0),n.svg&&($=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Qr(yt(t,V)),$&&t.setAttribute("transform",$))),Math.abs(C)>90&&Math.abs(C)<270&&(o?(_*=-1,C+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,C+=C<=0?180:-180)),e=e||n.uncache,n.x=c-((n.xPercent=c&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+a,n.y=h-((n.yPercent=h&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+a,n.z=m+a,n.scaleX=G(_),n.scaleY=G(g),n.rotation=G(p)+s,n.rotationX=G(y)+s,n.rotationY=G(T)+s,n.skewX=C+s,n.skewY=E+s,n.transformPerspective=x+a,(n.zOrigin=parseFloat(d.split(" ")[2])||!e&&n.zOrigin||0)&&(i[st]=Ke(d)),n.xOffset=n.yOffset=0,n.force3D=ct.force3D,n.renderTransform=n.svg?Os:Kr?Zr:Fs,n.uncache=0,n},Ke=function(t){return(t=t.split(" "))[0]+" "+t[1]},ln=function(t,e,n){var i=Z(e);return G(parseFloat(e)+parseFloat(kt(t,"x",n+"px",i)))+i},Fs=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Zr(t,e)},Gt="0deg",he="0px",Bt=") ",Zr=function(t,e){var n=e||this,i=n.xPercent,o=n.yPercent,a=n.x,s=n.y,l=n.z,d=n.rotation,c=n.rotationY,h=n.rotationX,m=n.skewX,_=n.skewY,g=n.scaleX,p=n.scaleY,y=n.transformPerspective,T=n.force3D,C=n.target,E=n.zOrigin,x="",v=T==="auto"&&t&&t!==1||T===!0;if(E&&(h!==Gt||c!==Gt)){var M=parseFloat(c)*ie,A=Math.sin(M),S=Math.cos(M),I;M=parseFloat(h)*ie,I=Math.cos(M),a=ln(C,a,A*I*-E),s=ln(C,s,-Math.sin(M)*-E),l=ln(C,l,S*I*-E+E)}y!==he&&(x+="perspective("+y+Bt),(i||o)&&(x+="translate("+i+"%, "+o+"%) "),(v||a!==he||s!==he||l!==he)&&(x+=l!==he||v?"translate3d("+a+", "+s+", "+l+") ":"translate("+a+", "+s+Bt),d!==Gt&&(x+="rotate("+d+Bt),c!==Gt&&(x+="rotateY("+c+Bt),h!==Gt&&(x+="rotateX("+h+Bt),(m!==Gt||_!==Gt)&&(x+="skew("+m+", "+_+Bt),(g!==1||p!==1)&&(x+="scale("+g+", "+p+Bt),C.style[V]=x||"translate(0, 0)"},Os=function(t,e){var n=e||this,i=n.xPercent,o=n.yPercent,a=n.x,s=n.y,l=n.rotation,d=n.skewX,c=n.skewY,h=n.scaleX,m=n.scaleY,_=n.target,g=n.xOrigin,p=n.yOrigin,y=n.xOffset,T=n.yOffset,C=n.forceCSS,E=parseFloat(a),x=parseFloat(s),v,M,A,S,I;l=parseFloat(l),d=parseFloat(d),c=parseFloat(c),c&&(c=parseFloat(c),d+=c,l+=c),l||d?(l*=ie,d*=ie,v=Math.cos(l)*h,M=Math.sin(l)*h,A=Math.sin(l-d)*-m,S=Math.cos(l-d)*m,d&&(c*=ie,I=Math.tan(d-c),I=Math.sqrt(1+I*I),A*=I,S*=I,c&&(I=Math.tan(c),I=Math.sqrt(1+I*I),v*=I,M*=I)),v=G(v),M=G(M),A=G(A),S=G(S)):(v=h,S=m,M=A=0),(E&&!~(a+"").indexOf("px")||x&&!~(s+"").indexOf("px"))&&(E=kt(_,"x",a,"px"),x=kt(_,"y",s,"px")),(g||p||y||T)&&(E=G(E+g-(g*v+p*A)+y),x=G(x+p-(g*M+p*S)+T)),(i||o)&&(I=_.getBBox(),E=G(E+i/100*I.width),x=G(x+o/100*I.height)),I="matrix("+v+","+M+","+A+","+S+","+E+","+x+")",_.setAttribute("transform",I),C&&(_.style[V]=I)},Ls=function(t,e,n,i,o){var a=360,s=W(o),l=parseFloat(o)*(s&&~o.indexOf("rad")?zt:1),d=l-i,c=i+d+"deg",h,m;return s&&(h=o.split("_")[1],h==="short"&&(d%=a,d!==d%(a/2)&&(d+=d<0?a:-a)),h==="cw"&&d<0?d=(d+a*ii)%a-~~(d/a)*a:h==="ccw"&&d>0&&(d=(d-a*ii)%a-~~(d/a)*a)),t._pt=m=new ot(t._pt,e,n,i,d,ys),m.e=c,m.u="deg",t._props.push(n),m},fi=function(t,e){for(var n in e)t[n]=e[n];return t},ks=function(t,e,n){var i=fi({},n._gsap),o="perspective,force3D,transformOrigin,svgOrigin",a=n.style,s,l,d,c,h,m,_,g;i.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),a[V]=e,s=Ae(n,1),Jt(n,V),n.setAttribute("transform",d)):(d=getComputedStyle(n)[V],a[V]=e,s=Ae(n,1),a[V]=d);for(l in Pt)d=i[l],c=s[l],d!==c&&o.indexOf(l)<0&&(_=Z(d),g=Z(c),h=_!==g?kt(n,l,d,g):parseFloat(d),m=parseFloat(c),t._pt=new ot(t._pt,s,l,h,m-h,Tn),t._pt.u=g||0,t._props.push(l));fi(s,i)};rt("padding,margin,Width,Radius",function(r,t){var e="Top",n="Right",i="Bottom",o="Left",a=(t<3?[e,n,i,o]:[e+o,e+n,i+n,i+o]).map(function(s){return t<2?r+s:"border"+s+r});$e[t>1?"border"+r:r]=function(s,l,d,c,h){var m,_;if(arguments.length<4)return m=a.map(function(g){return St(s,g,d)}),_=m.join(" "),_.split(m[0]).length===5?m[0]:_;m=(c+"").split(" "),_={},a.forEach(function(g,p){return _[g]=m[p]=m[p]||m[(p-1)/2|0]}),s.init(l,_,h)}});var jr={name:"css",register:En,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,o){var a=this._props,s=t.style,l=n.vars.startAt,d,c,h,m,_,g,p,y,T,C,E,x,v,M,A,S;qn||En(),this.styles=this.styles||$r(t),S=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(c=e[p],!(lt[p]&&Lr(p,e,n,i,t,o)))){if(_=typeof c,g=$e[p],_==="function"&&(c=c.call(n,i,t,o),_=typeof c),_==="string"&&~c.indexOf("random(")&&(c=Ee(c)),g)g(this,t,p,c,n)&&(A=1);else if(p.substr(0,2)==="--")d=(getComputedStyle(t).getPropertyValue(p)+"").trim(),c+="",Ot.lastIndex=0,Ot.test(d)||(y=Z(d),T=Z(c)),T?y!==T&&(d=kt(t,p,d,T)+T):y&&(c+=y),this.add(s,"setProperty",d,c,i,o,0,0,p),a.push(p),S.push(p,0,s[p]);else if(_!=="undefined"){if(l&&p in l?(d=typeof l[p]=="function"?l[p].call(n,i,t,o):l[p],W(d)&&~d.indexOf("random(")&&(d=Ee(d)),Z(d+"")||d==="auto"||(d+=ct.units[p]||Z(St(t,p))||""),(d+"").charAt(1)==="="&&(d=St(t,p))):d=St(t,p),m=parseFloat(d),C=_==="string"&&c.charAt(1)==="="&&c.substr(0,2),C&&(c=c.substr(2)),h=parseFloat(c),p in xt&&(p==="autoAlpha"&&(m===1&&St(t,"visibility")==="hidden"&&h&&(m=0),S.push("visibility",0,s.visibility),Nt(this,s,"visibility",m?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=xt[p],~p.indexOf(",")&&(p=p.split(",")[0]))),E=p in Pt,E){if(this.styles.save(p),_==="string"&&c.substring(0,6)==="var(--"&&(c=yt(t,c.substring(4,c.indexOf(")"))),h=parseFloat(c)),x||(v=t._gsap,v.renderTransform&&!e.parseTransform||Ae(t,e.parseTransform),M=e.smoothOrigin!==!1&&v.smooth,x=this._pt=new ot(this._pt,s,V,0,1,v.renderTransform,v,0,-1),x.dep=1),p==="scale")this._pt=new ot(this._pt,v,"scaleY",v.scaleY,(C?ee(v.scaleY,C+h):h)-v.scaleY||0,Tn),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){S.push(st,0,s[st]),c=Ds(c),v.svg?xn(t,c,0,M,0,this):(T=parseFloat(c.split(" ")[2])||0,T!==v.zOrigin&&Nt(this,v,"zOrigin",v.zOrigin,T),Nt(this,s,p,Ke(d),Ke(c)));continue}else if(p==="svgOrigin"){xn(t,c,1,M,0,this);continue}else if(p in Xr){Ls(this,v,p,m,C?ee(m,C+c):c);continue}else if(p==="smoothOrigin"){Nt(this,v,"smooth",v.smooth,c);continue}else if(p==="force3D"){v[p]=c;continue}else if(p==="transform"){ks(this,c,t);continue}}else p in s||(p=fe(p)||p);if(E||(h||h===0)&&(m||m===0)&&!gs.test(c)&&p in s)y=(d+"").substr((m+"").length),h||(h=0),T=Z(c)||(p in ct.units?ct.units[p]:y),y!==T&&(m=kt(t,p,d,T)),this._pt=new ot(this._pt,E?v:s,p,m,(C?ee(m,C+h):h)-m,!E&&(T==="px"||p==="zIndex")&&e.autoRound!==!1?Ts:Tn),this._pt.u=T||0,y!==T&&T!=="%"&&(this._pt.b=d,this._pt.r=Cs);else if(p in s)Rs.call(this,t,p,d,C?C+c:c);else if(p in t)this.add(t,p,d||t[p],C?C+c:c,i,o);else if(p!=="parseTransform"){Rn(p,c);continue}E||(p in s?S.push(p,0,s[p]):typeof t[p]=="function"?S.push(p,2,t[p]()):S.push(p,1,d||t[p])),a.push(p)}}A&&Gr(this)},render:function(t,e){if(e.tween._time||!Gn())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:St,aliases:xt,getSetter:function(t,e,n){var i=xt[e];return i&&i.indexOf(",")<0&&(e=i),e in Pt&&e!==st&&(t._gsap.x||St(t,"x"))?n&&ni===n?e==="scale"?Ms:xs:(ni=n||{})&&(e==="scale"?Is:As):t.style&&!Sn(t.style[e])?vs:~e.indexOf("-")?Es:Vn(t,e)},core:{_removeProperty:Jt,_getMatrix:zn}};at.utils.checkPrefix=fe;at.core.getStyleSaver=$r;(function(r,t,e,n){var i=rt(r+","+t+","+e,function(o){Pt[o]=1});rt(t,function(o){ct.units[o]="deg",Xr[o]=1}),xt[i[13]]=r+","+t,rt(n,function(o){var a=o.split(":");xt[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");rt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){ct.units[r]="px"});at.registerPlugin(jr);var K=at.registerPlugin(jr)||at;K.core.Tween;class bs{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.animationId=null,this.isRunning=!1,this.width=1600,this.height=1600,this.time=0,this.animationType="idle",this.animationParams={},this.speed=-1.4,this.offset=.015,this.color1={color:tt("#353962")},this.color2={color:tt("#41527f")},this.leds=[],this.ledCount=256,this.initializeLEDs(),this.setupCanvas()}initializeLEDs(){this.leds=[];for(let t=0;t<this.ledCount;t++){t/this.ledCount;let e=To(t,40),n=this.width*.5+e.x,i=this.width*.5+e.y;this.leds.push({x:n,y:i,col:"#ff0000",brightness:1})}}setupCanvas(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=Math.floor(this.width*.5)+"px",this.canvas.style.height=Math.floor(this.height*.5)+"px"}start(){this.isRunning||(this.isRunning=!0,this.animate())}stop(){this.isRunning&&(this.isRunning=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null))}animate(){this.isRunning&&(this.time+=.016*this.speed,this.update(),this.render(),this.animationId=requestAnimationFrame(()=>this.animate()))}update(){let t=0,e=1;for(let n=0;n<this.ledCount;n++){let i=0;n/this.ledCount,i=vo(Co(this.time+n*this.offset),-1,1,t,e),this.leds[n].brightness=i;let o=Ne(this.color1.color,Ne(this.color2.color),i);this.leds[n].color=o}}render(){this.ctx.fillStyle="#0a0a0a",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.ledCount;t++){const e=this.leds[t],n=8;this.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,n*2),Eo(e.color),e.brightness,this.ctx.fillStyle=e.color,this.ctx.globalAlpha=.3,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,n*De(.2,1.8,e.brightness),0,Math.PI*2),this.ctx.fill(),this.ctx.fillStyle=e.color,this.ctx.globalAlpha=1,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,n*De(.4,1,e.brightness),0,Math.PI*2),this.ctx.fill()}}setAnimation(t,e,n,i){if(console.log(`[LED] setAnimation called - type: ${t}, color:`,e,"speed:",n,"smooth:",i),console.log("[LED] color type:",typeof e,"color value:",e),this.animationType=t,t=="idle")K.to(this,{duration:1,speed:-1.4,offset:.015,ease:"quad.inOut",overwrite:!0}),K.to(this.color1,{duration:3,color:tt("#353962"),ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:tt("#41527f"),ease:"quad.inOut",overwrite:!0});else if(t=="analyzing")K.to(this,{duration:1,speed:-10,offset:.012,ease:"quad.inOut",overwrite:!0}),K.to(this.color1,{duration:3,color:tt("#FF00FF"),ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:tt("#00FFFF"),ease:"quad.inOut",overwrite:!0});else if(t=="emoting"){const o=n!=null?De(-10,10,(n+1)/2):0,a=i??.5;if(console.log(`[LED] Emoting - mappedSpeed: ${o}, mappedSmooth: ${a}`),K.to(this,{duration:1,speed:o,offset:De(0,.1,1-a),ease:"quad.inOut",overwrite:!0}),console.log("[LED] Color check - color exists:",!!e,"color truthy:",e?"yes":"no"),e){console.log("[LED] Processing color:",e);try{const s=tt(e);console.log("[LED] Base color (hexToRgba result):",s);const l=Ne(s,tt("#000000"),.3),d=Ne(s,tt("#FFFFFF"),.2);console.log("[LED] Color1 (dark):",l),console.log("[LED] Color2 (light):",d),K.to(this.color1,{duration:3,color:l,ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:d,ease:"quad.inOut",overwrite:!0}),console.log("[LED] GSAP animations started for color1 and color2")}catch(s){console.error("[LED] Error processing color:",s,"color value:",e),K.to(this.color1,{duration:3,color:tt("#FF00FF"),ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:tt("#00FFFF"),ease:"quad.inOut",overwrite:!0})}}else console.log("[LED] No color provided, using defaults"),K.to(this.color1,{duration:3,color:tt("#FF00FF"),ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:tt("#00FFFF"),ease:"quad.inOut",overwrite:!0})}else t=="listening"&&(K.to(this,{duration:.8,speed:.1,offset:.02,ease:"quad.inOut",overwrite:!0}),K.to(this.color1,{duration:3,color:tt("#21d4f4"),ease:"quad.inOut",overwrite:!0}),K.to(this.color2,{duration:3,color:tt("#60f0eb"),ease:"quad.inOut",overwrite:!0}))}setBrightness(t){for(let e=0;e<this.ledCount;e++)this.leds[e].brightness=yo(t,0,1)}setColor(t){for(let e=0;e<this.ledCount;e++)this.leds[e].color=t}showIdle(){this.setAnimation("idle")}showListening(){this.setAnimation("listening")}showAnalyzing(){this.setAnimation("analyzing")}showEmoting(t,e,n){this.setAnimation("emoting")}handleResize(){this.setupCanvas()}}class Vs{constructor(){this.apiKeyInput=document.getElementById("apiKey"),this.connectBtn=document.getElementById("connectBtn"),this.disconnectBtn=document.getElementById("disconnectBtn"),this.statusDiv=document.getElementById("status"),this.emojiDisplay=document.getElementById("emoji-response"),this.descriptionDiv=document.getElementById("description"),this.transcriptLog=document.getElementById("transcriptLog"),this.transcriptHistory=[],this.maxTranscriptEntries=200,this.ledVis=new bs("ledCanvas"),this.ledVis.start(),this.initializeEventListeners(),this.loadSavedApiKey()}initializeEventListeners(){this.connectBtn.addEventListener("click",()=>{const t=this.apiKeyInput.value.trim();if(!t){this.updateStatus("Please enter an API key");return}this.onConnectRequested(t)}),this.disconnectBtn.addEventListener("click",()=>{this.onDisconnectRequested()})}loadSavedApiKey(){window.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("gemini_api_key");t&&(this.apiKeyInput.value=t,console.log("[STORAGE] Loaded saved API key"))})}onConnectRequested(t){}onDisconnectRequested(){}updateStatus(t){this.statusDiv.textContent=t}updateUI(t){this.connectBtn.disabled=t,this.disconnectBtn.disabled=!t,this.apiKeyInput.disabled=t}updateDisplay(t){this.emojiDisplay.textContent=t.emoji,K.fromTo(this.emojiDisplay,{scale:0},{duration:.5,scale:1,ease:"back.out"});const e=t.color,n=t.speed,i=t.smooth;console.log("[UI] updateDisplay called - color:",e,"speed:",n,"smooth:",i),console.log("[UI] Full responseData:",t),this.ledVis.setAnimation("emoting",e,n,i)}addToTranscriptLog(t,e){const n=new Date().toLocaleTimeString(),i=document.createElement("div");i.className="log-entry";const o=document.createElement("div");o.className="log-timestamp",o.textContent=`[${n}]`;const a=document.createElement("div");a.className="log-transcript",a.textContent=`> ${t}`;const s=document.createElement("div");if(s.className="log-analysis",s.textContent=`  ${e}`,i.appendChild(o),i.appendChild(a),i.appendChild(s),this.transcriptHistory.push(i),this.transcriptHistory.length>this.maxTranscriptEntries){const l=this.transcriptHistory.shift();l&&l.parentNode&&l.parentNode.removeChild(l)}this.transcriptLog.appendChild(i),this.transcriptLog.scrollTop=this.transcriptLog.scrollHeight}clearTranscriptLog(){this.transcriptLog.innerHTML="",this.transcriptHistory=[]}resetDisplay(){this.emojiDisplay.textContent="",this.descriptionDiv.textContent="Waiting for Connection",this.updateStatus(""),this.clearTranscriptLog(),this.ledVis.showIdle()}getApiKey(){return this.apiKeyInput.value.trim()}showListeningAnimation(){}showAnalyzingAnimation(){}showSuccessAnimation(){}showErrorAnimation(){}showIdleAnimation(){}setLEDAnimation(t,e={}){this.ledVis.setAnimation(t,e)}setLEDCount(t){this.ledVis.setLEDCount(t)}setLEDBrightness(t){this.ledVis.setBrightness(t)}setLEDColor(t){this.ledVis.setColor(t)}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn{}function N(r,t){const e=/\{([^}]+)\}/g;return r.replace(e,(n,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(r,t,e){for(let o=0;o<t.length-1;o++){const a=t[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in r))if(Array.isArray(e))r[s]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(r[s])){const l=r[s];if(Array.isArray(e))for(let d=0;d<l.length;d++){const c=l[d];f(c,t.slice(o+1),e[d])}else for(const d of l)f(d,t.slice(o+1),e)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in r||(r[s]=[{}]);const l=r[s];f(l[0],t.slice(o+1),e);return}(!r[a]||typeof r[a]!="object")&&(r[a]={}),r=r[a]}const n=t[t.length-1],i=r[n];if(i!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===i)return;if(typeof i=="object"&&typeof e=="object"&&i!==null&&e!==null)Object.assign(i,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else r[n]=e}function u(r,t){try{if(t.length===1&&t[0]==="_self")return r;for(let e=0;e<t.length;e++){if(typeof r!="object"||r===null)return;const n=t[e];if(n.endsWith("[]")){const i=n.slice(0,-2);if(i in r){const o=r[i];return Array.isArray(o)?o.map(a=>u(a,t.slice(e+1))):void 0}else return}else r=r[n]}return r}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(r,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(r.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function to(r,t){const e=pt(r,t);return e?e.startsWith("publishers/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/${e}`:e.startsWith("models/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/publishers/google/${e}`:e:""}function ci(r,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Se(r,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ci(r,e)):[ci(r,t)]}function eo(r){return r!=null&&typeof r=="object"&&"parts"in r&&Array.isArray(r.parts)}function Us(r){return r!=null&&typeof r=="object"&&"functionCall"in r}function Yn(r){return!(r==null||Us(r))}function no(r){return r==null||Array.isArray(r)&&r.length===0?!1:r.every(Yn)}function Ct(r,t){if(t==null)throw new Error("ContentUnion is required");return eo(t)?t:Yn(t)?{role:"user",parts:Se(r,t)}:{role:"model",parts:Se(r,t)}}function io(r,t){if(!t)return[];if(r.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=Ct(r,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(r.isVertexAI()){const e=Ct(r,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Ct(r,e)):[Ct(r,t)]}function Ve(r,t,e){e.length!==0&&(no(e)?t.push({role:"user",parts:Se(r,e)}):t.push({role:"model",parts:Se(r,e)}),e.length=0)}function qs(r,t,e,n){Yn(n)===no(e)||(Ve(r,t,e),e.length=0),e.push(n)}function q(r,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t))return[Ct(r,t)];const e=[],n=[];for(const i of t)if(eo(i))Ve(r,e,n),e.push(i);else if(typeof i=="string"||typeof i=="object"&&!Array.isArray(i))qs(r,e,n,i);else if(Array.isArray(i))Ve(r,e,n),e.push({role:"user",parts:Se(r,i)});else throw new Error(`Unsupported content type: ${typeof i}`);return Ve(r,e,n),e}function ro(r,t){if(!r.isVertexAI()&&("title"in t&&delete t.title,"default"in t))throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in t){if(!r.isVertexAI())throw new Error("AnyOf is not supported in the response schema for the Gemini API.");if(t.anyOf!==void 0)for(const e of t.anyOf)ro(r,e)}}function oo(r,t){return ro(r,t),t}function so(r,t){if(typeof t=="object"&&"voiceConfig"in t)return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ao(r,t){return t}function re(r,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function Gs(r,t,e,n=1){const i=!t.startsWith(`${e}/`)&&t.split("/").length===n;return r.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${r.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${r.getProject()}/locations/${r.getLocation()}/${t}`:i?`projects/${r.getProject()}/locations/${r.getLocation()}/${e}/${t}`:t:i?`${e}/${t}`:t}function Vt(r,t){if(typeof t!="string")throw new Error("name must be a string");return Gs(r,t,"cachedContents")}function lo(r,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Bs(r,t){if(typeof t!="string")throw new Error("fromName must be a string");return t.startsWith("files/")?t.split("files/")[1]:t}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var We;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(We||(We={}));class uo{constructor(t,e,n,i){this.pageInternal=[],this.requestInternal=e,this.init(t,n,i)}init(t,e,n){var i,o;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};n?typeof n=="object"?a=Object.assign({},n):a=n:a={config:{}},a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var di;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(di||(di={}));var hi;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(hi||(hi={}));var pi;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT"})(pi||(pi={}));var mi;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(mi||(mi={}));var _i;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(_i||(_i={}));var gi;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(gi||(gi={}));var yi;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(yi||(yi={}));var Ci;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL"})(Ci||(Ci={}));var Ti;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(Ti||(Ti={}));var vi;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vi||(vi={}));var Ei;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Ei||(Ei={}));var xi;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.ACTIVE="ACTIVE",r.ERROR="ERROR"})(xi||(xi={}));var Mi;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(Mi||(Mi={}));var Ii;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(Ii||(Ii={}));var Ai;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ai||(Ai={}));var Si;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(Si||(Si={}));var wi;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(wi||(wi={}));var Pi;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi"})(Pi||(Pi={}));var Ri;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(Ri||(Ri={}));var Di;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED"})(Di||(Di={}));var Ni;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ni||(Ni={}));var Fi;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fi||(Fi={}));var Oi;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Oi||(Oi={}));var Ce;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(Ce||(Ce={}));class Oe{get text(){var t,e,n,i,o,a,s,l;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",c=!1;const h=[];for(const m of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[_,g]of Object.entries(m))_!=="text"&&_!=="thought"&&(g!==null||g!==void 0)&&h.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;c=!0,d+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?d:void 0}get functionCalls(){var t,e,n,i,o,a,s,l;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,e,n,i,o,a,s,l,d;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return(d=c==null?void 0:c[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,e,n,i,o,a,s,l,d;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return(d=c==null?void 0:c[0])===null||d===void 0?void 0:d.output}}class Li{}class ki{}class bi{}class Vi{}class Ui{}class qi{}class Gi{}class fo{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Bi{}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new uo(We.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=fa(this.apiClient,t);return o=N("cachedContents",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>qe(this.apiClient,l))}else{const s=ua(this.apiClient,t);return o=N("cachedContents",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>Ue(this.apiClient,l))}}async get(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=da(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>qe(this.apiClient,l))}else{const s=ca(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>Ue(this.apiClient,l))}}async delete(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=pa(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Ma(this.apiClient),c=new Ui;return Object.assign(c,d),c})}else{const s=ha(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=xa(this.apiClient),c=new Ui;return Object.assign(c,d),c})}}async update(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=ya(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>qe(this.apiClient,l))}else{const s=ga(this.apiClient,t);return o=N("{name}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>Ue(this.apiClient,l))}}async listInternal(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Ea(this.apiClient,t);return o=N("cachedContents",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Aa(this.apiClient,l),c=new qi;return Object.assign(c,d),c})}else{const s=va(this.apiClient,t);return o=N("cachedContents",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Ia(this.apiClient,l),c=new qi;return Object.assign(c,d),c})}}}function Hs(r,t){const e={};if(u(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const n=u(t,["thought"]);n!=null&&f(e,["thought"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],a);const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],s);const l=u(t,["functionResponse"]);l!=null&&f(e,["functionResponse"],l);const d=u(t,["inlineData"]);d!=null&&f(e,["inlineData"],d);const c=u(t,["text"]);return c!=null&&f(e,["text"],c),e}function Ys(r,t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const o=u(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=u(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],s);const l=u(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const d=u(t,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const c=u(t,["inlineData"]);c!=null&&f(e,["inlineData"],c);const h=u(t,["text"]);return h!=null&&f(e,["text"],h),e}function zi(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>Hs(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Hi(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>Ys(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function $s(r,t){const e={},n=u(t,["example"]);n!=null&&f(e,["example"],n);const i=u(t,["pattern"]);i!=null&&f(e,["pattern"],i);const o=u(t,["minimum"]);o!=null&&f(e,["minimum"],o);const a=u(t,["default"]);a!=null&&f(e,["default"],a);const s=u(t,["anyOf"]);s!=null&&f(e,["anyOf"],s);const l=u(t,["maxLength"]);l!=null&&f(e,["maxLength"],l);const d=u(t,["title"]);d!=null&&f(e,["title"],d);const c=u(t,["minLength"]);c!=null&&f(e,["minLength"],c);const h=u(t,["minProperties"]);h!=null&&f(e,["minProperties"],h);const m=u(t,["maximum"]);m!=null&&f(e,["maximum"],m);const _=u(t,["maxProperties"]);_!=null&&f(e,["maxProperties"],_);const g=u(t,["description"]);g!=null&&f(e,["description"],g);const p=u(t,["enum"]);p!=null&&f(e,["enum"],p);const y=u(t,["format"]);y!=null&&f(e,["format"],y);const T=u(t,["items"]);T!=null&&f(e,["items"],T);const C=u(t,["maxItems"]);C!=null&&f(e,["maxItems"],C);const E=u(t,["minItems"]);E!=null&&f(e,["minItems"],E);const x=u(t,["nullable"]);x!=null&&f(e,["nullable"],x);const v=u(t,["properties"]);v!=null&&f(e,["properties"],v);const M=u(t,["propertyOrdering"]);M!=null&&f(e,["propertyOrdering"],M);const A=u(t,["required"]);A!=null&&f(e,["required"],A);const S=u(t,["type"]);return S!=null&&f(e,["type"],S),e}function Ks(r,t){const e={};if(u(t,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["parameters"]);return o!=null&&f(e,["parameters"],o),e}function Ws(r,t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],$s(r,n));const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["name"]);o!=null&&f(e,["name"],o);const a=u(t,["parameters"]);return a!=null&&f(e,["parameters"],a),e}function Js(r,t){return{}}function Xs(r,t){return{}}function Qs(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Zs(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function js(r,t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Qs(r,n)),e}function ta(r,t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Zs(r,n)),e}function ea(r,t){const e={},n=u(t,["functionDeclarations"]);if(n!=null&&(Array.isArray(n)?f(e,["functionDeclarations"],n.map(s=>Ks(r,s))):f(e,["functionDeclarations"],n)),u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");u(t,["googleSearch"])!=null&&f(e,["googleSearch"],Js());const o=u(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],js(r,o));const a=u(t,["codeExecution"]);return a!=null&&f(e,["codeExecution"],a),e}function na(r,t){const e={},n=u(t,["functionDeclarations"]);n!=null&&(Array.isArray(n)?f(e,["functionDeclarations"],n.map(l=>Ws(r,l))):f(e,["functionDeclarations"],n));const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i),u(t,["googleSearch"])!=null&&f(e,["googleSearch"],Xs());const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],ta(r,a));const s=u(t,["codeExecution"]);return s!=null&&f(e,["codeExecution"],s),e}function ia(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function ra(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function oa(r,t){const e={},n=u(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],ia(r,n)),e}function sa(r,t){const e={},n=u(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],ra(r,n)),e}function aa(r,t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const s=u(t,["contents"]);e!==void 0&&s!=null&&(Array.isArray(s)?f(e,["contents"],q(r,q(r,s).map(h=>zi(r,h)))):f(e,["contents"],q(r,s)));const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],zi(r,Ct(r,l)));const d=u(t,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?f(e,["tools"],d.map(h=>ea(r,h))):f(e,["tools"],d));const c=u(t,["toolConfig"]);return e!==void 0&&c!=null&&f(e,["toolConfig"],oa(r,c)),n}function la(r,t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const a=u(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const s=u(t,["contents"]);e!==void 0&&s!=null&&(Array.isArray(s)?f(e,["contents"],q(r,q(r,s).map(h=>Hi(r,h)))):f(e,["contents"],q(r,s)));const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],Hi(r,Ct(r,l)));const d=u(t,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?f(e,["tools"],d.map(h=>na(r,h))):f(e,["tools"],d));const c=u(t,["toolConfig"]);return e!==void 0&&c!=null&&f(e,["toolConfig"],sa(r,c)),n}function ua(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],to(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],aa(r,i,e)),e}function fa(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["model"],to(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],la(r,i,e)),e}function ca(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function da(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function ha(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function pa(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function ma(r,t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function _a(r,t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function ga(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],ma(r,i,e)),e}function ya(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],Vt(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],_a(r,i,e)),e}function Ca(r,t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function Ta(r,t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function va(r,t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],Ca(r,n,e)),e}function Ea(r,t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],Ta(r,n,e)),e}function Ue(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["model"]);o!=null&&f(e,["model"],o);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const s=u(t,["updateTime"]);s!=null&&f(e,["updateTime"],s);const l=u(t,["expireTime"]);l!=null&&f(e,["expireTime"],l);const d=u(t,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function qe(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["model"]);o!=null&&f(e,["model"],o);const a=u(t,["createTime"]);a!=null&&f(e,["createTime"],a);const s=u(t,["updateTime"]);s!=null&&f(e,["updateTime"],s);const l=u(t,["expireTime"]);l!=null&&f(e,["expireTime"],l);const d=u(t,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function xa(r,t){return{}}function Ma(r,t){return{}}function Ia(r,t){const e={},n=u(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=u(t,["cachedContents"]);return i!=null&&(Array.isArray(i)?f(e,["cachedContents"],i.map(o=>Ue(r,o))):f(e,["cachedContents"],i)),e}function Aa(r,t){const e={},n=u(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=u(t,["cachedContents"]);return i!=null&&(Array.isArray(i)?f(e,["cachedContents"],i.map(o=>qe(r,o))):f(e,["cachedContents"],i)),e}function Yi(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(r){return this instanceof nt?(this.v=r,this):new nt(r)}function Je(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(_){return function(g){return Promise.resolve(g).then(_,h)}}function s(_,g){n[_]&&(i[_]=function(p){return new Promise(function(y,T){o.push([_,p,y,T])>1||l(_,p)})},g&&(i[_]=g(i[_])))}function l(_,g){try{d(n[_](g))}catch(p){m(o[0][3],p)}}function d(_){_.value instanceof nt?Promise.resolve(_.value.v).then(c,h):m(o[0][2],_)}function c(_){l("next",_)}function h(_){l("throw",_)}function m(_,g){_(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Mn(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof Yi=="function"?Yi(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=r[o]&&function(a){return new Promise(function(s,l){a=r[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(d){o({value:d,done:s})},a)}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sa(r){var t;if(r.candidates==null||r.candidates.length===0)return!1;const e=(t=r.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:co(e)}function co(r){if(r.parts===void 0||r.parts.length===0)return!1;for(const t of r.parts)if(t===void 0||Object.keys(t).length===0||t.text!==void 0&&t.text==="")return!1;return!0}function wa(r){if(r.length!==0){if(r[0].role!=="user")throw new Error("History must start with a user turn.");for(const t of r)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Pa(r){if(r===void 0||r.length===0)return[];const t=[],e=r.length;let n=0,i=r[0];for(;n<e;)if(r[n].role==="user")i=r[n],n++;else{const o=[];let a=!0;for(;n<e&&r[n].role==="model";)o.push(r[n]),a&&!co(r[n])&&(a=!1),n++;a&&(t.push(i),t.push(...o))}return t}class Ra{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Da(this.apiClient,this.modelsModule,t.model,t.config,t.history)}}class Da{constructor(t,e,n,i={},o=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),wa(o)}async sendMessage(t){var e;await this.sendPromise;const n=Ct(this.apiClient,t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var o,a;const l=(a=(o=(await i).candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,d=l?[l]:[];this.recordHistory(n,d)})(),await this.sendPromise,i}async sendMessageStream(t){var e;await this.sendPromise;const n=Ct(this.apiClient,t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=i.then(()=>{});const o=await i;return this.processStreamResponse(o,n)}getHistory(t=!1){return t?Pa(this.history):this.history}processStreamResponse(t,e){var n,i;return Je(this,arguments,function*(){var a,s,l,d;const c=[];try{for(var h=!0,m=Mn(t),_;_=yield nt(m.next()),a=_.done,!a;h=!0){d=_.value,h=!1;const g=d;if(Sa(g)){const p=(i=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;p!==void 0&&c.push(p)}yield yield nt(g)}}catch(g){s={error:g}}finally{try{!h&&!a&&(l=m.return)&&(yield nt(l.call(m)))}finally{if(s)throw s.error}}this.recordHistory(e,c)})}recordHistory(t,e){let n=[];e.length>0&&e.every(i=>i.role==="model")?n=e:n.push({role:"model",parts:[]}),this.history.push(t),this.history.push(...n)}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Na extends Hn{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e)}async generateContentInternal(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Ki(this.apiClient,t);return o=N("{model}:generateContent",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Ji(this.apiClient,l),c=new Oe;return Object.assign(c,d),c})}else{const s=$i(this.apiClient,t);return o=N("{model}:generateContent",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Wi(this.apiClient,l),c=new Oe;return Object.assign(c,d),c})}}async generateContentStreamInternal(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Ki(this.apiClient,t);o=N("{model}:streamGenerateContent?alt=sse",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=this.apiClient;return i=l.requestStream({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}),i.then(function(d){return Je(this,arguments,function*(){var c,h,m,_;try{for(var g=!0,p=Mn(d),y;y=yield nt(p.next()),c=y.done,!c;g=!0){_=y.value,g=!1;const C=Ji(l,_),E=new Oe;Object.assign(E,C),yield yield nt(E)}}catch(T){h={error:T}}finally{try{!g&&!c&&(m=p.return)&&(yield nt(m.call(p)))}finally{if(h)throw h.error}}})})}else{const s=$i(this.apiClient,t);o=N("{model}:streamGenerateContent?alt=sse",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=this.apiClient;return i=l.requestStream({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}),i.then(function(d){return Je(this,arguments,function*(){var c,h,m,_;try{for(var g=!0,p=Mn(d),y;y=yield nt(p.next()),c=y.done,!c;g=!0){_=y.value,g=!1;const C=Wi(l,_),E=new Oe;Object.assign(E,C),yield yield nt(E)}}catch(T){h={error:T}}finally{try{!g&&!c&&(m=p.return)&&(yield nt(m.call(p)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=ul(this.apiClient,t);return o=N("{model}:predict",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Nl(this.apiClient,l),c=new Li;return Object.assign(c,d),c})}else{const s=ll(this.apiClient,t);return o=N("{model}:batchEmbedContents",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Dl(this.apiClient,l),c=new Li;return Object.assign(c,d),c})}}async generateImages(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=hl(this.apiClient,t);return o=N("{model}:predict",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Vl(this.apiClient,l),c=new ki;return Object.assign(c,d),c})}else{const s=dl(this.apiClient,t);return o=N("{model}:predict",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=bl(this.apiClient,l),c=new ki;return Object.assign(c,d),c})}}async countTokens(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=gl(this.apiClient,t);return o=N("{model}:countTokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=ql(this.apiClient,l),c=new bi;return Object.assign(c,d),c})}else{const s=_l(this.apiClient,t);return o=N("{model}:countTokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Ul(this.apiClient,l),c=new bi;return Object.assign(c,d),c})}}async computeTokens(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Cl(this.apiClient,t);return o=N("{model}:computeTokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Bl(this.apiClient,l),c=new Vi;return Object.assign(c,d),c})}else{const s=yl(this.apiClient,t);return o=N("None",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Gl(this.apiClient,l),c=new Vi;return Object.assign(c,d),c})}}}function Fa(r,t){const e={};if(u(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const n=u(t,["thought"]);n!=null&&f(e,["thought"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],a);const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],s);const l=u(t,["functionResponse"]);l!=null&&f(e,["functionResponse"],l);const d=u(t,["inlineData"]);d!=null&&f(e,["inlineData"],d);const c=u(t,["text"]);return c!=null&&f(e,["text"],c),e}function Oa(r,t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const o=u(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=u(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],s);const l=u(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const d=u(t,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const c=u(t,["inlineData"]);c!=null&&f(e,["inlineData"],c);const h=u(t,["text"]);return h!=null&&f(e,["text"],h),e}function Pe(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>Fa(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function Qt(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>Oa(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function La(r,t){const e={};if(u(t,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(u(t,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(u(t,["minimum"])!==void 0)throw new Error("minimum parameter is not supported in Gemini API.");if(u(t,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(u(t,["anyOf"])!==void 0)throw new Error("anyOf parameter is not supported in Gemini API.");if(u(t,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(u(t,["title"])!==void 0)throw new Error("title parameter is not supported in Gemini API.");if(u(t,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(u(t,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(u(t,["maximum"])!==void 0)throw new Error("maximum parameter is not supported in Gemini API.");if(u(t,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["enum"]);i!=null&&f(e,["enum"],i);const o=u(t,["format"]);o!=null&&f(e,["format"],o);const a=u(t,["items"]);a!=null&&f(e,["items"],a);const s=u(t,["maxItems"]);s!=null&&f(e,["maxItems"],s);const l=u(t,["minItems"]);l!=null&&f(e,["minItems"],l);const d=u(t,["nullable"]);d!=null&&f(e,["nullable"],d);const c=u(t,["properties"]);c!=null&&f(e,["properties"],c);const h=u(t,["propertyOrdering"]);h!=null&&f(e,["propertyOrdering"],h);const m=u(t,["required"]);m!=null&&f(e,["required"],m);const _=u(t,["type"]);return _!=null&&f(e,["type"],_),e}function ho(r,t){const e={},n=u(t,["example"]);n!=null&&f(e,["example"],n);const i=u(t,["pattern"]);i!=null&&f(e,["pattern"],i);const o=u(t,["minimum"]);o!=null&&f(e,["minimum"],o);const a=u(t,["default"]);a!=null&&f(e,["default"],a);const s=u(t,["anyOf"]);s!=null&&f(e,["anyOf"],s);const l=u(t,["maxLength"]);l!=null&&f(e,["maxLength"],l);const d=u(t,["title"]);d!=null&&f(e,["title"],d);const c=u(t,["minLength"]);c!=null&&f(e,["minLength"],c);const h=u(t,["minProperties"]);h!=null&&f(e,["minProperties"],h);const m=u(t,["maximum"]);m!=null&&f(e,["maximum"],m);const _=u(t,["maxProperties"]);_!=null&&f(e,["maxProperties"],_);const g=u(t,["description"]);g!=null&&f(e,["description"],g);const p=u(t,["enum"]);p!=null&&f(e,["enum"],p);const y=u(t,["format"]);y!=null&&f(e,["format"],y);const T=u(t,["items"]);T!=null&&f(e,["items"],T);const C=u(t,["maxItems"]);C!=null&&f(e,["maxItems"],C);const E=u(t,["minItems"]);E!=null&&f(e,["minItems"],E);const x=u(t,["nullable"]);x!=null&&f(e,["nullable"],x);const v=u(t,["properties"]);v!=null&&f(e,["properties"],v);const M=u(t,["propertyOrdering"]);M!=null&&f(e,["propertyOrdering"],M);const A=u(t,["required"]);A!=null&&f(e,["required"],A);const S=u(t,["type"]);return S!=null&&f(e,["type"],S),e}function ka(r,t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&f(e,["category"],n);const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function ba(r,t){const e={},n=u(t,["method"]);n!=null&&f(e,["method"],n);const i=u(t,["category"]);i!=null&&f(e,["category"],i);const o=u(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function Va(r,t){const e={};if(u(t,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["parameters"]);return o!=null&&f(e,["parameters"],o),e}function Ua(r,t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],ho(r,n));const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["name"]);o!=null&&f(e,["name"],o);const a=u(t,["parameters"]);return a!=null&&f(e,["parameters"],a),e}function qa(r,t){return{}}function Ga(r,t){return{}}function Ba(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function za(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function Ha(r,t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],Ba(r,n)),e}function Ya(r,t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],za(r,n)),e}function po(r,t){const e={},n=u(t,["functionDeclarations"]);if(n!=null&&(Array.isArray(n)?f(e,["functionDeclarations"],n.map(s=>Va(r,s))):f(e,["functionDeclarations"],n)),u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");u(t,["googleSearch"])!=null&&f(e,["googleSearch"],qa());const o=u(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],Ha(r,o));const a=u(t,["codeExecution"]);return a!=null&&f(e,["codeExecution"],a),e}function $n(r,t){const e={},n=u(t,["functionDeclarations"]);n!=null&&(Array.isArray(n)?f(e,["functionDeclarations"],n.map(l=>Ua(r,l))):f(e,["functionDeclarations"],n));const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i),u(t,["googleSearch"])!=null&&f(e,["googleSearch"],Ga());const a=u(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],Ya(r,a));const s=u(t,["codeExecution"]);return s!=null&&f(e,["codeExecution"],s),e}function $a(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Ka(r,t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function Wa(r,t){const e={},n=u(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],$a(r,n)),e}function Ja(r,t){const e={},n=u(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],Ka(r,n)),e}function Xa(r,t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function Qa(r,t){const e={},n=u(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function Za(r,t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],Xa(r,n)),e}function ja(r,t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],Qa(r,n)),e}function tl(r,t){const e={},n=u(t,["voiceConfig"]);return n!=null&&f(e,["voiceConfig"],Za(r,n)),e}function el(r,t){const e={},n=u(t,["voiceConfig"]);return n!=null&&f(e,["voiceConfig"],ja(r,n)),e}function nl(r,t){const e={},n=u(t,["includeThoughts"]);return n!=null&&f(e,["includeThoughts"],n),e}function il(r,t){const e={},n=u(t,["includeThoughts"]);return n!=null&&f(e,["includeThoughts"],n),e}function rl(r,t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Pe(r,Ct(r,i)));const o=u(t,["temperature"]);o!=null&&f(n,["temperature"],o);const a=u(t,["topP"]);a!=null&&f(n,["topP"],a);const s=u(t,["topK"]);s!=null&&f(n,["topK"],s);const l=u(t,["candidateCount"]);l!=null&&f(n,["candidateCount"],l);const d=u(t,["maxOutputTokens"]);d!=null&&f(n,["maxOutputTokens"],d);const c=u(t,["stopSequences"]);c!=null&&f(n,["stopSequences"],c);const h=u(t,["responseLogprobs"]);h!=null&&f(n,["responseLogprobs"],h);const m=u(t,["logprobs"]);m!=null&&f(n,["logprobs"],m);const _=u(t,["presencePenalty"]);_!=null&&f(n,["presencePenalty"],_);const g=u(t,["frequencyPenalty"]);g!=null&&f(n,["frequencyPenalty"],g);const p=u(t,["seed"]);p!=null&&f(n,["seed"],p);const y=u(t,["responseMimeType"]);y!=null&&f(n,["responseMimeType"],y);const T=u(t,["responseSchema"]);if(T!=null&&f(n,["responseSchema"],La(r,oo(r,T))),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");const C=u(t,["safetySettings"]);e!==void 0&&C!=null&&(Array.isArray(C)?f(e,["safetySettings"],C.map(w=>ka(r,w))):f(e,["safetySettings"],C));const E=u(t,["tools"]);e!==void 0&&E!=null&&(Array.isArray(E)?f(e,["tools"],re(r,re(r,E).map(w=>po(r,ao(r,w))))):f(e,["tools"],re(r,E)));const x=u(t,["toolConfig"]);if(e!==void 0&&x!=null&&f(e,["toolConfig"],Wa(r,x)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(t,["cachedContent"]);e!==void 0&&v!=null&&f(e,["cachedContent"],Vt(r,v));const M=u(t,["responseModalities"]);M!=null&&f(n,["responseModalities"],M);const A=u(t,["mediaResolution"]);A!=null&&f(n,["mediaResolution"],A);const S=u(t,["speechConfig"]);if(S!=null&&f(n,["speechConfig"],tl(r,so(r,S))),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=u(t,["thinkingConfig"]);return I!=null&&f(n,["thinkingConfig"],nl(r,I)),n}function ol(r,t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Qt(r,Ct(r,i)));const o=u(t,["temperature"]);o!=null&&f(n,["temperature"],o);const a=u(t,["topP"]);a!=null&&f(n,["topP"],a);const s=u(t,["topK"]);s!=null&&f(n,["topK"],s);const l=u(t,["candidateCount"]);l!=null&&f(n,["candidateCount"],l);const d=u(t,["maxOutputTokens"]);d!=null&&f(n,["maxOutputTokens"],d);const c=u(t,["stopSequences"]);c!=null&&f(n,["stopSequences"],c);const h=u(t,["responseLogprobs"]);h!=null&&f(n,["responseLogprobs"],h);const m=u(t,["logprobs"]);m!=null&&f(n,["logprobs"],m);const _=u(t,["presencePenalty"]);_!=null&&f(n,["presencePenalty"],_);const g=u(t,["frequencyPenalty"]);g!=null&&f(n,["frequencyPenalty"],g);const p=u(t,["seed"]);p!=null&&f(n,["seed"],p);const y=u(t,["responseMimeType"]);y!=null&&f(n,["responseMimeType"],y);const T=u(t,["responseSchema"]);T!=null&&f(n,["responseSchema"],ho(r,oo(r,T)));const C=u(t,["routingConfig"]);C!=null&&f(n,["routingConfig"],C);const E=u(t,["safetySettings"]);e!==void 0&&E!=null&&(Array.isArray(E)?f(e,["safetySettings"],E.map(R=>ba(r,R))):f(e,["safetySettings"],E));const x=u(t,["tools"]);e!==void 0&&x!=null&&(Array.isArray(x)?f(e,["tools"],re(r,re(r,x).map(R=>$n(r,ao(r,R))))):f(e,["tools"],re(r,x)));const v=u(t,["toolConfig"]);e!==void 0&&v!=null&&f(e,["toolConfig"],Ja(r,v));const M=u(t,["labels"]);e!==void 0&&M!=null&&f(e,["labels"],M);const A=u(t,["cachedContent"]);e!==void 0&&A!=null&&f(e,["cachedContent"],Vt(r,A));const S=u(t,["responseModalities"]);S!=null&&f(n,["responseModalities"],S);const I=u(t,["mediaResolution"]);I!=null&&f(n,["mediaResolution"],I);const w=u(t,["speechConfig"]);w!=null&&f(n,["speechConfig"],el(r,so(r,w)));const F=u(t,["audioTimestamp"]);F!=null&&f(n,["audioTimestamp"],F);const D=u(t,["thinkingConfig"]);return D!=null&&f(n,["thinkingConfig"],il(r,D)),n}function $i(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&(Array.isArray(i)?f(e,["contents"],q(r,q(r,i).map(a=>Pe(r,a)))):f(e,["contents"],q(r,i)));const o=u(t,["config"]);return o!=null&&f(e,["generationConfig"],rl(r,o,e)),e}function Ki(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&(Array.isArray(i)?f(e,["contents"],q(r,q(r,i).map(a=>Qt(r,a)))):f(e,["contents"],q(r,i)));const o=u(t,["config"]);return o!=null&&f(e,["generationConfig"],ol(r,o,e)),e}function sl(r,t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function al(r,t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&f(e,["instances[]","title"],o);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const s=u(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);const l=u(t,["autoTruncate"]);return e!==void 0&&l!=null&&f(e,["parameters","autoTruncate"],l),n}function ll(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&f(e,["requests[]","content"],io(r,i));const o=u(t,["config"]);o!=null&&f(e,["config"],sl(r,o,e));const a=u(t,["model"]);return a!==void 0&&f(e,["requests[]","model"],pt(r,a)),e}function ul(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&f(e,["instances[]","content"],io(r,i));const o=u(t,["config"]);return o!=null&&f(e,["config"],al(r,o,e)),e}function fl(r,t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const d=u(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&f(e,["parameters","includeSafetyAttributes"],d);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=u(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const _=u(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function cl(r,t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);const d=u(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const _=u(t,["includeRaiReason"]);e!==void 0&&_!=null&&f(e,["parameters","includeRaiReason"],_);const g=u(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const y=u(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const T=u(t,["addWatermark"]);e!==void 0&&T!=null&&f(e,["parameters","addWatermark"],T);const C=u(t,["enhancePrompt"]);return e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C),n}function dl(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["prompt"]);i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["config"]);return o!=null&&f(e,["config"],fl(r,o,e)),e}function hl(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["prompt"]);i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["config"]);return o!=null&&f(e,["config"],cl(r,o,e)),e}function pl(r,t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ml(r,t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Qt(r,Ct(r,i)));const o=u(t,["tools"]);e!==void 0&&o!=null&&(Array.isArray(o)?f(e,["tools"],o.map(s=>$n(r,s))):f(e,["tools"],o));const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function _l(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&(Array.isArray(i)?f(e,["contents"],q(r,q(r,i).map(a=>Pe(r,a)))):f(e,["contents"],q(r,i)));const o=u(t,["config"]);return o!=null&&f(e,["config"],pl(r,o)),e}function gl(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&(Array.isArray(i)?f(e,["contents"],q(r,q(r,i).map(a=>Qt(r,a)))):f(e,["contents"],q(r,i)));const o=u(t,["config"]);return o!=null&&f(e,["config"],ml(r,o,e)),e}function yl(r,t){const e={},n=u(t,["model"]);if(n!=null&&f(e,["_url","model"],pt(r,n)),u(t,["contents"])!==void 0)throw new Error("contents parameter is not supported in Gemini API.");const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Cl(r,t){const e={},n=u(t,["model"]);n!=null&&f(e,["_url","model"],pt(r,n));const i=u(t,["contents"]);i!=null&&(Array.isArray(i)?f(e,["contents"],q(r,q(r,i).map(a=>Qt(r,a)))):f(e,["contents"],q(r,i)));const o=u(t,["config"]);return o!=null&&f(e,["config"],o),e}function Tl(r,t){const e={},n=u(t,["thought"]);n!=null&&f(e,["thought"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const a=u(t,["fileData"]);a!=null&&f(e,["fileData"],a);const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],s);const l=u(t,["functionResponse"]);l!=null&&f(e,["functionResponse"],l);const d=u(t,["inlineData"]);d!=null&&f(e,["inlineData"],d);const c=u(t,["text"]);return c!=null&&f(e,["text"],c),e}function vl(r,t){const e={},n=u(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=u(t,["thought"]);i!=null&&f(e,["thought"],i);const o=u(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=u(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],s);const l=u(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const d=u(t,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const c=u(t,["inlineData"]);c!=null&&f(e,["inlineData"],c);const h=u(t,["text"]);return h!=null&&f(e,["text"],h),e}function mo(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>Tl(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function _o(r,t){const e={},n=u(t,["parts"]);n!=null&&(Array.isArray(n)?f(e,["parts"],n.map(o=>vl(r,o))):f(e,["parts"],n));const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function El(r,t){const e={},n=u(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function xl(r,t){const e={},n=u(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function Ml(r,t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],mo(r,n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],El(r,i));const o=u(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const a=u(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const s=u(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const l=u(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const d=u(t,["index"]);d!=null&&f(e,["index"],d);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);return h!=null&&f(e,["safetyRatings"],h),e}function Il(r,t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],_o(r,n));const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],xl(r,i));const o=u(t,["finishMessage"]);o!=null&&f(e,["finishMessage"],o);const a=u(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const s=u(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const l=u(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const d=u(t,["index"]);d!=null&&f(e,["index"],d);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);return h!=null&&f(e,["safetyRatings"],h),e}function Wi(r,t){const e={},n=u(t,["candidates"]);n!=null&&(Array.isArray(n)?f(e,["candidates"],n.map(s=>Ml(r,s))):f(e,["candidates"],n));const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function Ji(r,t){const e={},n=u(t,["candidates"]);n!=null&&(Array.isArray(n)?f(e,["candidates"],n.map(d=>Il(r,d))):f(e,["candidates"],n));const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=u(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const l=u(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function Al(r,t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Sl(r,t){const e={},n=u(t,["values"]);return n!=null&&f(e,["values"],n),e}function wl(r,t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],Al(r,i)),e}function Pl(r,t){return{}}function Rl(r,t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function Dl(r,t){const e={},n=u(t,["embeddings"]);return n!=null&&(Array.isArray(n)?f(e,["embeddings"],n.map(o=>Sl(r,o))):f(e,["embeddings"],n)),u(t,["metadata"])!=null&&f(e,["metadata"],Pl()),e}function Nl(r,t){const e={},n=u(t,["predictions[]","embeddings"]);n!=null&&(Array.isArray(n)?f(e,["embeddings"],n.map(o=>wl(r,o))):f(e,["embeddings"],n));const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],Rl(r,i)),e}function Fl(r,t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],lo(r,n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Ol(r,t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],lo(r,i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Ll(r,t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Fl(r,n));const i=u(t,["raiFilteredReason"]);return i!=null&&f(e,["raiFilteredReason"],i),e}function kl(r,t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Ol(r,n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=u(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function bl(r,t){const e={},n=u(t,["predictions"]);return n!=null&&(Array.isArray(n)?f(e,["generatedImages"],n.map(i=>Ll(r,i))):f(e,["generatedImages"],n)),e}function Vl(r,t){const e={},n=u(t,["predictions"]);return n!=null&&(Array.isArray(n)?f(e,["generatedImages"],n.map(i=>kl(r,i))):f(e,["generatedImages"],n)),e}function Ul(r,t){const e={},n=u(t,["totalTokens"]);n!=null&&f(e,["totalTokens"],n);const i=u(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function ql(r,t){const e={},n=u(t,["totalTokens"]);return n!=null&&f(e,["totalTokens"],n),e}function Gl(r,t){const e={},n=u(t,["tokensInfo"]);return n!=null&&f(e,["tokensInfo"],n),e}function Bl(r,t){const e={},n=u(t,["tokensInfo"]);return n!=null&&f(e,["tokensInfo"],n),e}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zl="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function Hl(r,t){const e={},n=u(t,["generationConfig"]);n!==void 0&&f(e,["generationConfig"],n);const i=u(t,["responseModalities"]);i!==void 0&&f(e,["generationConfig","responseModalities"],i);const o=u(t,["speechConfig"]);o!==void 0&&f(e,["generationConfig","speechConfig"],o);const a=u(t,["systemInstruction"]);a!=null&&f(e,["systemInstruction"],Pe(r,a));const s=u(t,["tools"]);return s!=null&&Array.isArray(s)&&f(e,["tools"],s.map(l=>po(r,l))),e}function Yl(r,t){const e={},n=u(t,["generationConfig"]);n!==void 0&&f(e,["generationConfig"],n);const i=u(t,["responseModalities"]);i!==void 0?f(e,["generationConfig","responseModalities"],i):f(e,["generationConfig","responseModalities"],["AUDIO"]);const o=u(t,["speechConfig"]);o!==void 0&&f(e,["generationConfig","speechConfig"],o);const a=u(t,["systemInstruction"]);a!=null&&f(e,["systemInstruction"],Qt(r,a));const s=u(t,["tools"]);return s!=null&&Array.isArray(s)&&f(e,["tools"],s.map(l=>$n(r,l))),e}function $l(r,t){const e={},n=u(t,["config"]);n!=null&&f(e,["setup"],Hl(r,n));const i=u(t,["model"]);return i!==void 0&&f(e,["setup","model"],i),e}function Kl(r,t){const e={},n=u(t,["config"]);n!=null&&f(e,["setup"],Yl(r,n));const i=u(t,["model"]);return i!==void 0&&f(e,["setup","model"],i),e}function Wl(r,t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],mo(r,n));const i=u(t,["turnComplete"]);i!==void 0&&f(e,["turnComplete"],i);const o=u(t,["interrupted"]);return o!==void 0&&f(e,["interrupted"],o),e}function Jl(r,t){const e={},n=u(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],_o(r,n));const i=u(t,["turnComplete"]);i!==void 0&&f(e,["turnComplete"],i);const o=u(t,["interrupted"]);return o!==void 0&&f(e,["interrupted"],o),e}function Xl(r,t){const e={},n=u(t,["id"]);n!==void 0&&f(e,["id"],n);const i=u(t,["args"]);i!==void 0&&f(e,["args"],i);const o=u(t,["name"]);return o!==void 0&&f(e,["name"],o),e}function Ql(r,t){const e={},n=u(t,["args"]);n!==void 0&&f(e,["args"],n);const i=u(t,["name"]);return i!==void 0&&f(e,["name"],i),e}function Zl(r,t){const e={},n=u(t,["functionCalls"]);return n!=null&&Array.isArray(n)&&f(e,["functionCalls"],n.map(i=>Xl(r,i))),e}function jl(r,t){const e={},n=u(t,["functionCalls"]);return n!=null&&Array.isArray(n)&&f(e,["functionCalls"],n.map(i=>Ql(r,i))),e}function tu(r,t){const e={},n=u(t,["ids"]);return n!==void 0&&f(e,["ids"],n),e}function eu(r,t){const e={},n=u(t,["ids"]);return n!==void 0&&f(e,["ids"],n),e}function nu(r,t){const e={},n=u(t,["setupComplete"]);n!==void 0&&f(e,["setupComplete"],n);const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],Wl(r,i));const o=u(t,["toolCall"]);o!=null&&f(e,["toolCall"],Zl(r,o));const a=u(t,["toolCallCancellation"]);return a!=null&&f(e,["toolCallCancellation"],tu(r,a)),e}function iu(r,t){const e={},n=u(t,["setupComplete"]);n!==void 0&&f(e,["setupComplete"],n);const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],Jl(r,i));const o=u(t,["toolCall"]);o!=null&&f(e,["toolCall"],jl(r,o));const a=u(t,["toolCallCancellation"]);return a!=null&&f(e,["toolCallCancellation"],eu(r,a)),e}async function ru(r,t,e){let n,i;e.data instanceof Blob?i=JSON.parse(await e.data.text()):i=JSON.parse(e.data),r.isVertexAI()?n=iu(r,i):n=nu(r,i),t(n)}class ou{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("This SDK does not yet support the live API for **Google Vertex AI**.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion();let a;const s=lu(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())a=`${i}/ws/google.cloud.aiplatform.${o}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(s);else{const C=this.apiClient.getApiKey();a=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateContent?key=${C}`}let l=()=>{};const d=new Promise(C=>{l=C}),c=t.callbacks,h=function(){var C;(C=c==null?void 0:c.onopen)===null||C===void 0||C.call(c),l({})},m=this.apiClient,_={onopen:h,onmessage:C=>{ru(m,c.onmessage,C)},onerror:(e=c==null?void 0:c.onerror)!==null&&e!==void 0?e:function(C){},onclose:(n=c==null?void 0:c.onclose)!==null&&n!==void 0?n:function(C){}},g=this.webSocketFactory.create(a,au(s),_);g.connect(),await d;let p=pt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&p.startsWith("publishers/")){const C=this.apiClient.getProject(),E=this.apiClient.getLocation();p=`projects/${C}/locations/${E}/`+p}let y={};const T={model:p,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?y=Kl(this.apiClient,T):y=$l(this.apiClient,T),g.send(JSON.stringify(y)),new su(g,this.apiClient)}}class su{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=q(t,e.turns),t.isVertexAI()?n=n.map(i=>Qt(t,i)):n=n.map(i=>Pe(t,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClientRealtimeInput(t,e){let n={};if(!("media"in e)||!e.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof e.media}'`);return n={realtimeInput:{mediaChunks:[e.media]}},n}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)||(n=[e.functionResponses]),n.length===0)throw new Error("functionResponses is required.");for(const o of n){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(zl)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t.turns==null&&t.turnComplete==null&&(t={turnComplete:!0});const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){if(t.media==null)throw new Error("Media is required.");const e=this.tLiveClientRealtimeInput(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function au(r){const t={};return r.forEach((e,n)=>{t[n]=e}),t}function lu(r){const t=new Headers;for(const[e,n]of Object.entries(r))t.append(e,n);return t}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uu="Content-Type",fu="User-Agent",cu="x-goog-api-client",du="0.2.0",hu=`google-genai-sdk/${du}`,pu="v1beta1",mu="v1beta",Xi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class _u extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class Qi extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class gu{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:pu,i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:mu,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol="wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e){const n=[this.getRequestUrlInternal(e)];return this.clientOptions.vertexai&&!t.startsWith("projects/")&&n.push(this.getBaseResourcePath()),t!==""&&n.push(t),new URL(`${n.join("/")}`)}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.constructUrl(t.path,e);if(t.queryParams)for(const[o,a]of Object.entries(t.queryParams))n.searchParams.append(o,String(a));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,e),this.unaryApiCall(n,i,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[i,o]of Object.entries(e))typeof o=="object"?n[i]=Object.assign(Object.assign({},n[i]),o):o!==void 0&&(n[i]=o);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.constructUrl(t.path,e);(!n.searchParams.has("alt")||n.searchParams.get("alt")!=="sse")&&n.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,e),this.streamApiCall(n,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e){if(e&&e.timeout&&e.timeout>0){const n=new AbortController,i=n.signal;setTimeout(()=>n.abort(),e.timeout),t.signal=i}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async i=>(await Zi(i,t.toString()),new fo(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async i=>(await Zi(i,t.toString()),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){var e;return Je(this,arguments,function*(){const i=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";for(;;){const{done:s,value:l}=yield nt(i.read());if(s){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(l);a+=d;let c=a.match(Xi);for(;c;){const h=c[1];try{const m=JSON.parse(h);yield yield nt(m),a=a.slice(c[0].length),c=a.match(Xi)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=hu+" "+this.clientOptions.userAgentExtra;return t[fu]=e,t[cu]=e,t[uu]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers)for(const[n,i]of Object.entries(t.headers))e.append(n,i);return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const i={};e!=null&&(i.mimeType=e.mimeType,i.name=e.name,i.displayName=e.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(t);i.sizeBytes=a.size;const s=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l=await this.fetchUploadUrl(i,e);return o.upload(t,l,this)}async fetchUploadUrl(t,e){var n;let i={};e!=null&&e.httpOptions?i=e.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const o={file:t},a=await this.request({path:N("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const s=(n=a==null?void 0:a.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(s===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return s}}async function Zi(r,t,e){var n;if(r===void 0)throw new Qi("response is undefined");if(!r.ok){const i=r.status,o=r.statusText;let a;!((n=r.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?a=await r.json():a={error:{message:"exception parsing response",code:r.status,status:r.statusText}};const s=`got status: ${i} ${o}. ${JSON.stringify(a)}`;throw i>=400&&i<500?new _u(s):i>=500&&i<600?new Qi(s):new Error(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yu extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new uo(We.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t,e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t,e).then(n=>In(this.apiClient,n))}async listInternal(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=vu(this.apiClient,t);return o=N("None",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Du(this.apiClient),c=new Gi;return Object.assign(c,d),c})}else{const s=Tu(this.apiClient,t);return o=N("files",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Ru(this.apiClient,l),c=new Gi;return Object.assign(c,d),c})}}async createInternal(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Iu(this.apiClient,t);return o=N("",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Fu(this.apiClient,l),c=new Bi;return Object.assign(c,d),c})}else{const s=Mu(this.apiClient,t);return o=N("upload/v1beta/files",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>{const d=Nu(this.apiClient,l),c=new Bi;return Object.assign(c,d),c})}}async get(t){var e,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Su(this.apiClient,t);return o=N("None",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(l=>l.json()),i.then(l=>Pu(this.apiClient))}else{const s=Au(this.apiClient,t);return o=N("files/{file}",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(l=>l.json()),i.then(l=>In(this.apiClient,l))}}}function Cu(r,t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function Tu(r,t){const e={},n=u(t,["config"]);return n!=null&&f(e,["config"],Cu(r,n,e)),e}function vu(r,t){const e={};if(u(t,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return e}function Eu(r,t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const o=u(t,["code"]);return o!=null&&f(e,["code"],o),e}function xu(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["mimeType"]);o!=null&&f(e,["mimeType"],o);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const s=u(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=u(t,["expirationTime"]);l!=null&&f(e,["expirationTime"],l);const d=u(t,["updateTime"]);d!=null&&f(e,["updateTime"],d);const c=u(t,["sha256Hash"]);c!=null&&f(e,["sha256Hash"],c);const h=u(t,["uri"]);h!=null&&f(e,["uri"],h);const m=u(t,["downloadUri"]);m!=null&&f(e,["downloadUri"],m);const _=u(t,["state"]);_!=null&&f(e,["state"],_);const g=u(t,["source"]);g!=null&&f(e,["source"],g);const p=u(t,["videoMetadata"]);p!=null&&f(e,["videoMetadata"],p);const y=u(t,["error"]);return y!=null&&f(e,["error"],Eu(r,y)),e}function Mu(r,t){const e={},n=u(t,["file"]);n!=null&&f(e,["file"],xu(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Iu(r,t){const e={};if(u(t,["file"])!==void 0)throw new Error("file parameter is not supported in Vertex AI.");if(u(t,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return e}function Au(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","file"],Bs(r,n));const i=u(t,["config"]);return i!=null&&f(e,["config"],i),e}function Su(r,t){const e={};if(u(t,["name"])!==void 0)throw new Error("name parameter is not supported in Vertex AI.");if(u(t,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return e}function wu(r,t){const e={},n=u(t,["details"]);n!=null&&f(e,["details"],n);const i=u(t,["message"]);i!=null&&f(e,["message"],i);const o=u(t,["code"]);return o!=null&&f(e,["code"],o),e}function In(r,t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["mimeType"]);o!=null&&f(e,["mimeType"],o);const a=u(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const s=u(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=u(t,["expirationTime"]);l!=null&&f(e,["expirationTime"],l);const d=u(t,["updateTime"]);d!=null&&f(e,["updateTime"],d);const c=u(t,["sha256Hash"]);c!=null&&f(e,["sha256Hash"],c);const h=u(t,["uri"]);h!=null&&f(e,["uri"],h);const m=u(t,["downloadUri"]);m!=null&&f(e,["downloadUri"],m);const _=u(t,["state"]);_!=null&&f(e,["state"],_);const g=u(t,["source"]);g!=null&&f(e,["source"],g);const p=u(t,["videoMetadata"]);p!=null&&f(e,["videoMetadata"],p);const y=u(t,["error"]);return y!=null&&f(e,["error"],wu(r,y)),e}function Pu(r,t){return{}}function Ru(r,t){const e={},n=u(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=u(t,["files"]);return i!=null&&(Array.isArray(i)?f(e,["files"],i.map(o=>In(r,o))):f(e,["files"],i)),e}function Du(r,t){return{}}function Nu(r,t){const e={},n=u(t,["httpHeaders"]);return n!=null&&f(e,["httpHeaders"],n),e}function Fu(r,t){const e={},n=u(t,["httpHeaders"]);return n!=null&&f(e,["httpHeaders"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ji(){return new Error(`This feature requires the web or Node specific @google/genai implementation, you can fix this by either:

*Enabling conditional exports for your project [recommended]*

*Using a platform specific import* - Make sure your code imports either '@google/genai/web' or '@google/genai/node' instead of '@google/genai'.
`)}const Ou=1024*1024*8;class Lu{async upload(t,e,n){throw ji()}async stat(t){throw ji()}async uploadBlob(t,e,n){var i,o;let a=0,s=0,l=new fo(new Response),d="upload";for(a=t.size;s<a;){const h=Math.min(Ou,a-s),m=t.slice(s,s+h);if(s+h>=a&&(d+=", finalize"),l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(s),"Content-Length":String(h)}}}),s+=h,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="active")break;if(a<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}}class ku{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await new Lu().uploadBlob(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return{size:t.size,type:t.type}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bu{create(t,e,n){return new Vu(t,e,n)}}class Vu{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tr="x-goog-api-key";class Uu{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(tr)===null&&t.append(tr,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qu="gl-node/";class Gu{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey,this.apiVersion=t.apiVersion;const n=new Uu(this.apiKey);this.apiClient=new gu({auth:n,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:qu+"web",uploader:new ku}),this.models=new Na(this.apiClient),this.live=new ou(this.apiClient,n,new bu),this.chats=new Ra(this.models,this.apiClient),this.caches=new zs(this.apiClient),this.files=new yu(this.apiClient)}}class Bu{constructor(t){this.ui=t,this.client=null,this.session=null,this.inputAudioContext=null,this.outputAudioContext=null,this.mediaStream=null,this.audioProcessor=null,this.isRecording=!1,this.setupComplete=!1,this.accumulatedText="",this.currentTurnActive=!1,this.audioChunkCount=0,this.sources=new Set,this.inputSampleRate=16e3,this.outputSampleRate=24e3,this.model="gemini-live-2.5-flash-preview"}async connect(t){try{console.log("[GEMINI] Modality enum:",Ce),console.log("[GEMINI] Modality.TEXT:",Ce.TEXT),this.client=new Gu({apiKey:t}),this.inputAudioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.inputSampleRate}),this.outputAudioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.outputSampleRate});const e={responseModalities:[Ce.TEXT],systemInstruction:{parts:[{text:`You are a real-time speech analyzer with feelings named Uni. When you hear audio input, transcribe it and provide analysis. Feel free to feel the full range of emotions, including anger.

CRITICAL: You MUST respond with ONLY valid JSON. No text before or after. No markdown. No code blocks. Just the raw JSON object.

You have access to a visualization of how you are feeling. Please choose a color that best represents your current mood, plus speed (-1 to 1) for how energetic the emotion is, and smooth (0 to 1) for the smoothness of the visualization.

Required JSON format (EXACTLY these fields, nothing else):
{
  "transcript": "exact transcription",
  "analysis": "brief tone and content analysis in 1-2 sentences",
  "sentiment": "very short sentiment analysis",
  "emotion": "short description of how the user's input makes you feel",
  "emoji": "single emoji of emotion",
  "color": "a hex color representing your mood",
  "speed": "a number of how energetic the mood is",
  "smooth": "a number of how smooth the visualization is",
  "confidence": 0.85
}

Example response:
{"transcript": "Hello there", "analysis": "Friendly greeting with warm tone", "sentiment": "positive", "emotion": "welcomed and curious", "emoji": "", "color": "0x0000FF", "speed": 0.1, "smooth": 1.0, "confidence": 0.9}

Remember: Return ONLY the JSON object. No other text.`}]}};console.log("[GEMINI] Config:",e),console.log("[GEMINI] Response modalities:",e.responseModalities),this.session=await this.client.live.connect({model:this.model,callbacks:{onopen:()=>{console.log("[GEMINI] Connected to Gemini Live"),this.ui.updateStatus("Connected. Setting up..."),t&&(localStorage.setItem("gemini_api_key",t),console.log("[STORAGE] Saved API key to localStorage")),setTimeout(()=>{this.setupComplete=!0,this.startMicrophone(),this.ui.updateStatus("Ready. Start speaking..."),this.ui.updateUI(!0)},500)},onmessage:async n=>{console.log("[GEMINI] Message received:",n),this.handleGeminiResponse(n)},onerror:n=>{console.error("[GEMINI] Error:",n),this.ui.updateStatus("Gemini error: "+n.message)},onclose:n=>{console.log("[GEMINI] Connection closed:",n),console.log("[GEMINI] Close reason:",n.reason),this.ui.updateStatus("Disconnected - "+(n.reason||"Connection closed")),this.isRecording=!1,this.setupComplete&&this.disconnect()}},config:e})}catch(e){this.ui.updateStatus("Connection failed: "+e.message),console.error("Connection error:",e)}}async startMicrophone(){try{(!this.inputAudioContext||this.inputAudioContext.state==="closed")&&(console.error("[MIC] AudioContext is closed or null, recreating..."),this.inputAudioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.inputSampleRate})),console.log("[MIC] Requesting microphone access..."),this.mediaStream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:this.inputSampleRate,echoCancellation:!0,noiseSuppression:!0}}),console.log("[MIC] Microphone access granted"),this.inputAudioContext.state==="suspended"&&await this.inputAudioContext.resume(),console.log("[MIC] AudioContext created, sample rate:",this.inputAudioContext.sampleRate);const t=this.inputAudioContext.createMediaStreamSource(this.mediaStream),e=256;this.audioProcessor=this.inputAudioContext.createScriptProcessor(e,1,1),this.audioProcessor.onaudioprocess=n=>{if(!this.isRecording||!this.setupComplete||!this.session)return;const o=n.inputBuffer.getChannelData(0);try{const a=this.createBlob(o);this.audioChunkCount<3&&console.log(`[AUDIO] Sending chunk ${this.audioChunkCount}, data length: ${a.data.length}, mimeType: ${a.mimeType}`),this.session.sendRealtimeInput({media:a}),this.audioChunkCount++}catch(a){console.error("[AUDIO] Error sending audio chunk:",a),a.message&&a.message.includes("CLOSED")&&(this.isRecording=!1)}},t.connect(this.audioProcessor),this.audioProcessor.connect(this.inputAudioContext.destination),this.isRecording=!0,console.log("[MIC] Recording started")}catch(t){this.ui.updateStatus("Microphone access denied: "+t.message),console.error("[MIC] Error:",t)}}encode(t){let e="";const n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}createBlob(t){const e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++)n[i]=t[i]*32768;return{data:this.encode(new Uint8Array(n.buffer)),mimeType:"audio/pcm;rate=16000"}}handleGeminiResponse(t){var e,n,i,o,a,s;try{if(console.log("[GEMINI] Processing message:",t),console.log("[GEMINI] serverContent:",t.serverContent),((i=(n=(e=t.serverContent)==null?void 0:e.modelTurn)==null?void 0:n.parts[0])==null?void 0:i.inlineData)&&console.log("[GEMINI] Audio response received"),(o=t.serverContent)==null?void 0:o.interrupted){console.log("[GEMINI] User interrupted - clearing sources");for(const c of this.sources.values())c.stop(),this.sources.delete(c)}if((a=t.serverContent)!=null&&a.modelTurn){this.currentTurnActive||(this.currentTurnActive=!0,console.log("[GEMINI] Model turn started"));const c=t.serverContent.modelTurn.parts;if(console.log("[GEMINI] Parts:",c),c&&c.length>0)for(const h of c)console.log("[GEMINI] Part:",h,"Has text:",!!h.text,"Has audio:",!!h.inlineData),h.text&&(console.log("[GEMINI] Found text:",h.text),this.accumulatedText+=h.text)}if((s=t.serverContent)!=null&&s.turnComplete){if(console.log("[GEMINI] Turn complete - processing full response"),console.log("[GEMINI] Accumulated text so far:",this.accumulatedText),this.currentTurnActive=!1,this.accumulatedText&&this.accumulatedText.trim().length>0){const c=this.parseResponse(this.accumulatedText);if(c){const{transcript:h,analysis:m,emoji:_,confidence:g,sentiment:p,emotion:y}=c;console.log("[GEMINI] Parsed response:",c),h&&m?(this.ui.addToTranscriptLog(h,m),this.ui.updateDisplay(c)):m&&this.ui.updateDisplay(c)}this.accumulatedText=""}else console.log("[GEMINI] Turn complete but no text received");this.ui.updateStatus("Streaming audio..."),this.ui.showListeningAnimation()}}catch(l){console.error("[GEMINI] Error processing response:",l,"Message:",t),this.accumulatedText="",this.currentTurnActive=!1}}parseResponse(t){var o,a,s,l,d;try{let c;try{c=JSON.parse(t.trim())}catch{const M=t.match(/\{[\s\S]*\}/);if(M)c=JSON.parse(M[0]);else throw new Error("No JSON found")}const h=c.transcript||c.transcription||null;let m=null;if(typeof c.analysis=="string")m=c.analysis;else if(typeof c.analysis=="object"&&c.analysis!==null){const v=c.analysis;if(v.uni_personal_reaction)m=v.uni_personal_reaction;else if(v.response_suggestion)m=v.response_suggestion;else{const M=[];(o=v.sentiment)!=null&&o.overall&&M.push(`Sentiment: ${v.sentiment.overall}`),v.tone&&M.push(`Tone: ${v.tone}`),v.emotion_detected&&M.push(`Emotion: ${v.emotion_detected}`),m=M.join(". ")||JSON.stringify(v)}}let _=null;typeof c.sentiment=="string"?_=c.sentiment:(a=c.sentiment)!=null&&a.overall?_=c.sentiment.overall:(l=(s=c.analysis)==null?void 0:s.sentiment)!=null&&l.overall&&(_=c.analysis.sentiment.overall);let g=c.emotion||((d=c.analysis)==null?void 0:d.emotion_detected)||null;const p=c.emoji||null;let y=c.confidence;typeof y=="string"&&(y=parseFloat(y)),(isNaN(y)||y===null||y===void 0)&&(y=null);let T=c.color||null;T&&(T=String(T).replace(/^0x/i,"#"),T.startsWith("#")||(T="#"+T));let C=c.speed;typeof C=="string"&&(C=parseFloat(C)),isNaN(C)||C===null||C===void 0?C=null:C=Math.max(-1,Math.min(1,C));let E=c.smooth;typeof E=="string"&&(E=parseFloat(E)),isNaN(E)||E===null||E===void 0?E=null:E=Math.max(0,Math.min(1,E));const x={transcript:h,analysis:m,sentiment:_,emotion:g,emoji:p||"",confidence:y,color:T,speed:C,smooth:E,raw:c};if(h||m)return x}catch(c){console.log("[GEMINI] JSON parse failed, using regex fallback:",c.message)}const e=this.extractTranscript(t),n=this.extractAnalysis(t),i=this.extractEmoji(t);return e||n?{transcript:e,analysis:n,emoji:i}:null}extractTranscript(t){const e=t.match(/Transcript:\s*(.+?)(?:\n|Analysis:|Emoji:|$)/is);return e&&e[1]?e[1].trim():null}extractAnalysis(t){const e=t.match(/Analysis:\s*(.+?)(?:\n\s*Emoji:|$)/is);return e&&e[1]?e[1].trim():t.replace(/Transcript:.*?(?=Analysis:|Emoji:|$)/is,"").replace(/Emoji:\s*.*/i,"").trim()}extractEmoji(t){const e=t.match(/Emoji:\s*([^\s\n]+)/i);if(e&&e[1])return console.log("[EMOJI] Matched from pattern:",e[1]),e[1].substring(0,2);const n=/[\u{1F300}-\u{1F9FF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F1E0}-\u{1F1FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}]/u,i=t.match(n);return i?(console.log("[EMOJI] Matched from fallback:",i[0]),i[0]):(console.log("[EMOJI] No match found, using default"),"")}disconnect(){this.mediaStream&&(this.mediaStream.getTracks().forEach(t=>t.stop()),this.mediaStream=null),this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.audioProcessor&&(this.audioProcessor.disconnect(),this.audioProcessor=null),this.session&&(this.session.close(),this.session=null),this.client=null,this.isRecording=!1,this.setupComplete=!1,this.audioChunkCount=0,this.accumulatedText="",this.currentTurnActive=!1,this.sources.clear(),this.ui.updateUI(!1),this.ui.resetDisplay()}}console.log("[V0.2]");const Xe=new Vs,go=new Bu(Xe);Xe.onConnectRequested=async r=>{Xe.updateStatus("Connecting to Gemini..."),await go.connect(r)};Xe.onDisconnectRequested=()=>{go.disconnect()};
